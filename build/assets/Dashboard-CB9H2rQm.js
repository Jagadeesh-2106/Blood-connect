const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/client-o4yWeWyG.js","assets/index-DNIlUR1s.js","assets/index-CX79WyEx.css"])))=>i.map(i=>d[i]);
import{c as F,j as e,i as le,r as p,u as fe,a as D,b as R,d as E,B as y,f as _,e as T,h as B,M as ye,P as te,H as Q,S as Ge,T as ee,t as A,_ as je,R as me,L as Ne,C as J,g as ve,U as oe,k as Ra,l as Ea}from"./index-DNIlUR1s.js";import{S as _e,T as Ie,a as $e,b as Y,c as X}from"./tabs-Dkw5DwG9.js";import{A as Xe,a as Ze,b as Qe,N as La}from"./avatar-BmJfrz3M.js";import{u as ea,e as aa,f as ge,g as Pa,h as _a,I as L,S as H,a as q,b as z,c as O,d as x,i as Ee,P as Ia,j as $a,R as Ha,k as qa,F as za,D as Oa,l as Ka}from"./select-Bb3RTuD4.js";import{P as pe,C as ke}from"./index-CLj2UTeR.js";import{profile as sa,projectId as Ga}from"./client-o4yWeWyG.js";import{U as be,a as Ae,b as Se,P as He,C as Fa,L as Ce,A as Fe}from"./alert-0M9sgyUM.js";import{C as Z}from"./calendar-Cvff4I2K.js";import{B as ce,A as Ua}from"./building-2-DxqqUnDM.js";import{B as he}from"./bell-CU5x37jF.js";import{S as qe}from"./search-J4PdtSCg.js";import{D as ta,L as Le}from"./log-out-BVii4vpY.js";import{C as ie}from"./circle-check-big-Ds_kcbNd.js";import{T as De}from"./trending-up-RF2uwjUv.js";import{P as Va}from"./progress-Bk3O-kB8.js";import{A as Ue}from"./activity-CYynT4U6.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ve=F("arrow-up",Ja);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Ya=F("bell-off",Wa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Te=F("chart-column",Xa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Qa=F("chart-pie",Za);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=F("download",es);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],We=F("file-down",as);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ts=F("file-text",ss);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],is=F("funnel",ns);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ls=F("info",rs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],na=F("map",os);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ds=F("pen-line",cs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ue=F("plus",ms);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],us=F("repeat",hs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ps=F("save",xs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],js=F("send",gs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ns=F("square-pen",ys);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],vs=F("test-tube",fs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ia=F("trash-2",bs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Cs=F("volume-2",ws);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],As=F("volume-x",ks);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ra=F("x",Ss);function re({className:a,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:le("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}var Me="Switch",[Ds]=aa(Me),[Ts,Bs]=Ds(Me),la=p.forwardRef((a,s)=>{const{__scopeSwitch:r,name:g,checked:o,defaultChecked:h,required:l,disabled:c,value:N="on",onCheckedChange:f,form:j,...u}=a,[m,d]=p.useState(null),S=fe(s,t=>d(t)),C=p.useRef(!1),i=m?j||!!m.closest("form"):!0,[k,M]=ea({prop:o,defaultProp:h??!1,onChange:f,caller:Me});return e.jsxs(Ts,{scope:r,checked:k,disabled:c,children:[e.jsx(pe.button,{type:"button",role:"switch","aria-checked":k,"aria-required":l,"data-state":ma(k),"data-disabled":c?"":void 0,disabled:c,value:N,...u,ref:S,onClick:ge(a.onClick,t=>{M(b=>!b),i&&(C.current=t.isPropagationStopped(),C.current||t.stopPropagation())})}),i&&e.jsx(da,{control:m,bubbles:!C.current,name:g,value:N,checked:k,required:l,disabled:c,form:j,style:{transform:"translateX(-100%)"}})]})});la.displayName=Me;var oa="SwitchThumb",ca=p.forwardRef((a,s)=>{const{__scopeSwitch:r,...g}=a,o=Bs(oa,r);return e.jsx(pe.span,{"data-state":ma(o.checked),"data-disabled":o.disabled?"":void 0,...g,ref:s})});ca.displayName=oa;var Ms="SwitchBubbleInput",da=p.forwardRef(({__scopeSwitch:a,control:s,checked:r,bubbles:g=!0,...o},h)=>{const l=p.useRef(null),c=fe(l,h),N=Pa(r),f=_a(s);return p.useEffect(()=>{const j=l.current;if(!j)return;const u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(N!==r&&d){const S=new Event("click",{bubbles:g});d.call(j,r),j.dispatchEvent(S)}},[N,r,g]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:c,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});da.displayName=Ms;function ma(a){return a?"checked":"unchecked"}var Rs=la,Es=ca;function Ls({className:a,...s}){return e.jsx(Rs,{"data-slot":"switch",className:le("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(Es,{"data-slot":"switch-thumb",className:le("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Ps({userProfile:a,onProfileUpdate:s}){const[r,g]=p.useState(!1),[o,h]=p.useState(!1),[l,c]=p.useState({fullName:a.fullName,phoneNumber:a.phoneNumber,location:a.location,bloodType:a.bloodType||"",isAvailable:a.isAvailable||!1,organizationName:a.organizationName||"",organizationType:a.organizationType||"",emergencyContact:a.emergencyContact||"",emergencyPhone:a.emergencyPhone||"",occupation:a.occupation||"",address:a.address||"",pincode:a.pincode||"",allergies:a.allergies||"",medicalConditions:a.medicalConditions||"",currentMedications:a.currentMedications||"",lastCheckup:a.lastCheckup||"",donorType:a.donorType||"",preferredTime:a.preferredTime||"",maxTravelDistance:a.maxTravelDistance||""}),N=["A+","A-","B+","B-","AB+","AB-","O+","O-"],f=["Hospital","Blood Bank","Clinic","Medical Center","Non-profit","Other"],j=async()=>{try{h(!0);const m={fullName:l.fullName.trim(),phoneNumber:l.phoneNumber.trim(),location:l.location.trim(),emergencyContact:l.emergencyContact.trim(),emergencyPhone:l.emergencyPhone.trim(),occupation:l.occupation.trim(),address:l.address.trim(),pincode:l.pincode.trim(),allergies:l.allergies.trim(),medicalConditions:l.medicalConditions.trim(),currentMedications:l.currentMedications.trim(),lastCheckup:l.lastCheckup,...a.role==="donor"&&{bloodType:l.bloodType,isAvailable:l.isAvailable,donorType:l.donorType,preferredTime:l.preferredTime,maxTravelDistance:l.maxTravelDistance},...a.role==="clinic"&&{organizationName:l.organizationName.trim(),organizationType:l.organizationType}},d=await sa.update(m);if(d.error)throw new Error(d.error);g(!1),A.success("Profile updated successfully!"),s()}catch(m){console.error("Error updating profile:",m),A.error(m.message||"Failed to update profile")}finally{h(!1)}},u=()=>{c({fullName:a.fullName,phoneNumber:a.phoneNumber,location:a.location,bloodType:a.bloodType||"",isAvailable:a.isAvailable||!1,organizationName:a.organizationName||"",organizationType:a.organizationType||"",emergencyContact:a.emergencyContact||"",emergencyPhone:a.emergencyPhone||"",occupation:a.occupation||"",address:a.address||"",pincode:a.pincode||"",allergies:a.allergies||"",medicalConditions:a.medicalConditions||"",currentMedications:a.currentMedications||"",lastCheckup:a.lastCheckup||"",donorType:a.donorType||"",preferredTime:a.preferredTime||"",maxTravelDistance:a.maxTravelDistance||""}),g(!1)};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx(E,{children:"Profile Settings"})]}),r?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{onClick:j,size:"sm",disabled:o,children:[e.jsx(ps,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Changes"]}),e.jsxs(y,{onClick:u,variant:"outline",size:"sm",disabled:o,children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"Cancel"]})]}):e.jsxs(y,{onClick:()=>g(!0),variant:"outline",size:"sm",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]}),e.jsx(_,{children:"Manage your personal information and preferences"})]}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(Xe,{className:"w-20 h-20",children:[e.jsx(Ze,{src:""}),e.jsx(Qe,{className:"text-lg",children:a.fullName.split(" ").map(m=>m[0]).join("").toUpperCase()})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold",children:a.fullName}),e.jsx(B,{variant:a.role==="donor"?"default":"secondary",className:"capitalize",children:a.role})]}),e.jsx("p",{className:"text-gray-600 mb-1",children:a.email}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Member since ",new Date(a.createdAt).toLocaleDateString()]})]})]})})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Personal Information"]})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),r?e.jsx(L,{value:l.fullName,onChange:m=>c({...l,fullName:m.target.value}),placeholder:"Enter your full name"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md text-gray-600",children:a.email}),e.jsx("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Phone Number"}),r?e.jsx(L,{value:l.phoneNumber,onChange:m=>c({...l,phoneNumber:m.target.value}),placeholder:"Enter your phone number"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.phoneNumber})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),r?e.jsx(L,{value:l.location,onChange:m=>c({...l,location:m.target.value}),placeholder:"Enter your location"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.location})]})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5"}),"Additional Details"]}),e.jsx(_,{children:"Extended profile information from registration"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Occupation"}),r?e.jsx(L,{value:l.occupation,onChange:m=>c({...l,occupation:m.target.value}),placeholder:"Enter your occupation"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.occupation||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"PIN Code"}),r?e.jsx(L,{value:l.pincode,onChange:m=>c({...l,pincode:m.target.value}),placeholder:"Enter PIN code",maxLength:6}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.pincode||"Not specified"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Complete Address"}),r?e.jsx(re,{value:l.address,onChange:m=>c({...l,address:m.target.value}),placeholder:"Enter your complete address",rows:2}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.address||"Not specified"})]})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Emergency Contact"]}),e.jsx(_,{children:"Emergency contact details for medical situations"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Emergency Contact Name"}),r?e.jsx(L,{value:l.emergencyContact,onChange:m=>c({...l,emergencyContact:m.target.value}),placeholder:"Enter emergency contact name"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.emergencyContact||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Emergency Contact Phone"}),r?e.jsx(L,{value:l.emergencyPhone,onChange:m=>c({...l,emergencyPhone:m.target.value}),placeholder:"Enter emergency contact phone"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.emergencyPhone||"Not specified"})]})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Medical Information"]}),e.jsx(_,{children:"Medical details from your registration profile"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Known Allergies"}),r?e.jsx(re,{value:l.allergies,onChange:m=>c({...l,allergies:m.target.value}),placeholder:"Enter known allergies or 'None'",rows:2}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.allergies||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Medical Conditions"}),r?e.jsx(re,{value:l.medicalConditions,onChange:m=>c({...l,medicalConditions:m.target.value}),placeholder:"Enter medical conditions or 'None'",rows:2}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.medicalConditions||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Current Medications"}),r?e.jsx(re,{value:l.currentMedications,onChange:m=>c({...l,currentMedications:m.target.value}),placeholder:"Enter current medications or 'None'",rows:2}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.currentMedications||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Last Medical Checkup"}),r?e.jsx(L,{type:"date",value:l.lastCheckup,onChange:m=>c({...l,lastCheckup:m.target.value})}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.lastCheckup?new Date(a.lastCheckup).toLocaleDateString():"Not specified"})]})]})})]}),a.role==="donor"&&e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Donation Preferences"]}),e.jsx(_,{children:"Your donation preferences from registration"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Donor Type"}),r?e.jsxs(H,{value:l.donorType,onValueChange:m=>c({...l,donorType:m}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select donor type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"regular",children:"Regular Donor"}),e.jsx(x,{value:"emergency",children:"Emergency Donor"}),e.jsx(x,{value:"both",children:"Both"})]})]}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md capitalize",children:a.donorType||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Preferred Time"}),r?e.jsxs(H,{value:l.preferredTime,onValueChange:m=>c({...l,preferredTime:m}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select preferred time"})}),e.jsxs(O,{children:[e.jsx(x,{value:"morning",children:"Morning (9 AM - 12 PM)"}),e.jsx(x,{value:"afternoon",children:"Afternoon (12 PM - 4 PM)"}),e.jsx(x,{value:"evening",children:"Evening (4 PM - 7 PM)"}),e.jsx(x,{value:"flexible",children:"Flexible"})]})]}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md capitalize",children:a.preferredTime||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Max Travel Distance"}),r?e.jsxs(H,{value:l.maxTravelDistance,onValueChange:m=>c({...l,maxTravelDistance:m}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select distance"})}),e.jsxs(O,{children:[e.jsx(x,{value:"5",children:"Within 5 km"}),e.jsx(x,{value:"10",children:"Within 10 km"}),e.jsx(x,{value:"20",children:"Within 20 km"}),e.jsx(x,{value:"50",children:"Within 50 km"}),e.jsx(x,{value:"any",children:"Any distance"})]})]}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.maxTravelDistance?a.maxTravelDistance==="any"?"Any distance":`Within ${a.maxTravelDistance} km`:"Not specified"})]})]})})]}),a.role==="donor"&&e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"Donor Information"]})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Blood Type"}),r?e.jsxs(H,{value:l.bloodType,onValueChange:m=>c({...l,bloodType:m}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select your blood type"})}),e.jsx(O,{children:N.map(m=>e.jsx(x,{value:m,children:m},m))})]}):e.jsx("div",{className:"py-2 px-3 bg-red-50 rounded-md",children:e.jsx(B,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:a.bloodType})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Availability Status"}),r?e.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[e.jsx(Ls,{checked:l.isAvailable,onCheckedChange:m=>c({...l,isAvailable:m})}),e.jsx("span",{className:"text-sm",children:l.isAvailable?"Available to donate":"Not available"})]}):e.jsx("div",{className:"py-2 px-3 bg-gray-50 rounded-md",children:e.jsx(B,{variant:a.isAvailable?"default":"secondary",children:a.isAvailable?"Available to Donate":"Not Available"})})]})]})})]}),a.role==="clinic"&&e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Organization Information"]})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Organization Name"}),r?e.jsx(L,{value:l.organizationName,onChange:m=>c({...l,organizationName:m.target.value}),placeholder:"Enter organization name"}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.organizationName||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Organization Type"}),r?e.jsxs(H,{value:l.organizationType,onValueChange:m=>c({...l,organizationType:m}),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select organization type"})}),e.jsx(O,{children:f.map(m=>e.jsx(x,{value:m,children:m},m))})]}):e.jsx("p",{className:"py-2 px-3 bg-gray-50 rounded-md",children:a.organizationType||"Not specified"})]})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"Account Security"]}),e.jsx(_,{children:"Manage your account security and privacy settings"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last updated: Not available"})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security"})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Enable 2FA"})]})]})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Data & Privacy"]}),e.jsx(_,{children:"Manage how your data is used and shared"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Download Your Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get a copy of your data"})]}),e.jsx(y,{variant:"outline",size:"sm",children:"Download Data"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg border-red-200",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-600",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and data"})]}),e.jsx(y,{variant:"destructive",size:"sm",children:"Delete Account"})]})]})]})]})}const Pe={"New York, NY":{lat:40.7128,lng:-74.006},"Los Angeles, CA":{lat:34.0522,lng:-118.2437},"Chicago, IL":{lat:41.8781,lng:-87.6298},"Houston, TX":{lat:29.7604,lng:-95.3698},"Phoenix, AZ":{lat:33.4484,lng:-112.074},"Philadelphia, PA":{lat:39.9526,lng:-75.1652},"San Antonio, TX":{lat:29.4241,lng:-98.4936},"San Diego, CA":{lat:32.7157,lng:-117.1611},"Dallas, TX":{lat:32.7767,lng:-96.797},"San Jose, CA":{lat:37.3382,lng:-121.8863},"Mumbai, Maharashtra":{lat:19.076,lng:72.8777},"Delhi, Delhi":{lat:28.7041,lng:77.1025},"Bangalore, Karnataka":{lat:12.9716,lng:77.5946},"Hyderabad, Telangana":{lat:17.385,lng:78.4867},"Chennai, Tamil Nadu":{lat:13.0827,lng:80.2707},"Kolkata, West Bengal":{lat:22.5726,lng:88.3639},"Pune, Maharashtra":{lat:18.5204,lng:73.8567},"Ahmedabad, Gujarat":{lat:23.0225,lng:72.5714},"Jaipur, Rajasthan":{lat:26.9124,lng:75.7873},"Surat, Gujarat":{lat:21.1702,lng:72.8311}};function _s(a){if(Pe[a])return Pe[a];const s=a.toLowerCase();for(const[r,g]of Object.entries(Pe))if(r.toLowerCase().includes(s)||s.includes(r.toLowerCase()))return g;return null}function ha(a){return a<1?`${Math.round(a*1e3)}m`:`${a}km`}function Is(a,s){const r={Critical:"bg-red-100 text-red-800 border-red-200",High:"bg-orange-100 text-orange-800 border-orange-200",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200",Low:"bg-blue-100 text-blue-800 border-blue-200"};return s<=2?a==="Critical"?"bg-red-500 text-white":"bg-red-100 text-red-800 border-red-200":r[a]||r.Low}class $s{baseUrl;isEnabled=!0;audioContext=null;constructor(){this.baseUrl=`https://${Ga}.supabase.co/functions/v1/make-server-206208a7`,this.setupAudioContext()}setupAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(s){console.warn("Web Audio API not supported:",s)}}async requestPermission(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await Notification.requestPermission()==="granted":(console.warn("This browser does not support desktop notifications"),!1)}setEnabled(s){this.isEnabled=s,localStorage.setItem("notifications_enabled",s.toString())}isNotificationEnabled(){const s=localStorage.getItem("notifications_enabled");return s===null?!0:s==="true"}playNotificationSound(s){if(!(!this.audioContext||!this.isNotificationEnabled()))try{const r=this.audioContext.createOscillator(),g=this.audioContext.createGain();r.connect(g),g.connect(this.audioContext.destination);const h={Critical:[800,1e3,800],High:[600,800],Medium:[500],Low:[400]}[s]||[400];r.frequency.setValueAtTime(h[0],this.audioContext.currentTime),g.gain.setValueAtTime(.3,this.audioContext.currentTime),g.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.5),r.start(this.audioContext.currentTime),r.stop(this.audioContext.currentTime+.5),(s==="Critical"||s==="High")&&setTimeout(()=>{if(this.audioContext){const l=this.audioContext.createOscillator(),c=this.audioContext.createGain();l.connect(c),c.connect(this.audioContext.destination),l.frequency.value=h[1]||h[0],c.gain.setValueAtTime(.3,this.audioContext.currentTime),c.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),l.start(),l.stop(this.audioContext.currentTime+.3)}},600)}catch(r){console.warn("Error playing notification sound:",r)}}async showBloodRequestNotification(s){if(!this.isEnabled||!this.isNotificationEnabled()||!await this.requestPermission())return;const g=`ðŸ©¸ ${s.urgency} Blood Request`,o=`${s.bloodType} blood needed at ${s.hospital} (${s.distance}km away) - ${s.units} unit${s.units>1?"s":""}`,h=new Notification(g,{body:o,icon:"/favicon.ico",badge:"/favicon.ico",tag:`blood-request-${s.hospital}`,requireInteraction:s.urgency==="Critical",silent:!1});this.playNotificationSound(s.urgency);const l=`${s.bloodType} blood needed at ${s.hospital} (${s.distance}km away)`;return s.urgency==="Critical"?A.error(l,{duration:1e4,position:"top-right"}):s.urgency==="High"?A.warning(l,{duration:7e3,position:"top-right"}):A.info(l,{duration:5e3,position:"top-right"}),s.urgency!=="Critical"&&setTimeout(()=>{h.close()},8e3),h}async showRequestAcceptedNotification(s){if(!this.isEnabled||!this.isNotificationEnabled()||!await this.requestPermission())return;const g="âœ… Blood Request Accepted!",o=`${s.donorName} will donate ${s.bloodType} blood for your request at ${s.hospital}`,h=new Notification(g,{body:o,icon:"/favicon.ico",badge:"/favicon.ico",tag:`request-accepted-${s.donorName}`,requireInteraction:!0,silent:!1});return this.playNotificationSound("High"),A.success(`${s.donorName} accepted your blood request!`,{duration:8e3,position:"top-right"}),h}async showEmergencyBroadcastNotification(s){if(!this.isEnabled||!this.isNotificationEnabled()||!await this.requestPermission())return;const o=(s.escalationLevel??0)>0?`ðŸš¨ ESCALATED EMERGENCY - ${s.bloodType} Blood Needed`:`ðŸš¨ EMERGENCY BROADCAST - ${s.bloodType} Blood Needed`,h=`${s.hospitalName} urgently needs ${s.unitsNeeded} unit${s.unitsNeeded>1?"s":""} of ${s.bloodType} blood in ${s.location}`,l=new Notification(o,{body:h,icon:"/favicon.ico",badge:"/favicon.ico",tag:`emergency-${s.hospitalName}-${s.bloodType}`,requireInteraction:!0,silent:!1,renotify:!0});return this.playNotificationSound("Critical"),A.error(h,{duration:15e3,position:"top-center",className:"emergency-toast"}),setTimeout(()=>{l.close()},12e4),l}async broadcastEmergencyAlert(s){console.log(`ðŸš¨ Broadcasting emergency alert: ${s.bloodType} needed at ${s.hospitalName}`),await this.showEmergencyBroadcastNotification(s);const r=`Emergency broadcast sent to all ${s.bloodType} donors and hospital partners in ${s.location}`;return A.success(r,{duration:5e3,position:"bottom-right"}),!0}async fetchNotifications(s){try{if(!s)return console.warn("No userId provided for notifications"),[];const r=new Promise((o,h)=>setTimeout(()=>h(new Error("Notification fetch timeout")),3e3)),g=(async()=>{const{apiCall:o}=await je(async()=>{const{apiCall:h}=await import("./client-o4yWeWyG.js");return{apiCall:h}},__vite__mapDeps([0,1,2]));try{return(await o(`/notifications/${s}`)).notifications||[]}catch(h){return console.debug("Notification API call failed:",h),[]}})();try{return await Promise.race([g,r])}catch(o){return console.debug("Notification fetch failed, returning empty array:",o),[]}}catch(r){return console.warn("Backend unavailable, using demo data:",r),[]}}async markAsRead(s){try{const r=new Promise((o,h)=>setTimeout(()=>h(new Error("Mark as read timeout")),2e3)),g=(async()=>{const{apiCall:o}=await je(async()=>{const{apiCall:h}=await import("./client-o4yWeWyG.js");return{apiCall:h}},__vite__mapDeps([0,1,2]));try{return await o(`/notifications/${s}/read`,{method:"PUT"}),!0}catch(h){return localStorage.getItem("demo_session")!==null?!0:(console.debug("Mark as read API call failed:",h),!1)}})();try{return await Promise.race([g,r])}catch(o){return console.debug("Failed to mark notification as read:",o),localStorage.getItem("demo_session")!==null}}catch(r){return console.error("Error marking notification as read:",r),!1}}startPolling(s,r="donor",g=3e4){if(!s)return console.warn("Cannot start notification polling: no userId provided"),null;let o=Date.now()-6e4;const h=async()=>{try{const c=(await this.fetchNotifications(s)).filter(N=>!N.read&&new Date(N.createdAt).getTime()>o);console.log(`ðŸ”” Found ${c.length} new notifications for ${r}`);for(const N of c)if(N.type==="blood_request"&&r==="donor"){const f=N.message.match(/(O\+|O-|A\+|A-|B\+|B-|AB\+|AB-)/),j=f?f[1]:"Unknown";let u=N.title.replace("ðŸ©¸ Critical Blood Request Near You","").replace("New Blood Request Near You","").replace(/^[\s\-]+/,"");if(N.message.includes(" at ")){const m=N.message.split(" at ")[1]?.split(" -")[0];m&&(u=m)}await this.showBloodRequestNotification({bloodType:j,hospital:u||"Local Hospital",distance:N.distance||0,urgency:N.urgency,units:1,location:"Unknown"}),console.log(`ðŸ“± Showed blood request notification for donor: ${j} at ${u}`)}else N.type==="request_accepted"&&(r==="patient"||r==="clinic")?(await this.showRequestAcceptedNotification({donorName:N.donorName||"A donor",bloodType:N.message.match(/(O\+|O-|A\+|A-|B\+|B-|AB\+|AB-)/)?.[1]||"Unknown",hospital:N.message.split(" at ")[1]?.split(".")[0]||"the hospital",donorContact:N.donorContact,donorMessage:N.donorMessage}),console.log(`ðŸŽ‰ Showed request accepted notification for ${r}: ${N.donorName} accepted request`)):(N.type==="emergency_broadcast"||N.type==="emergency_escalation")&&(await this.showEmergencyBroadcastNotification({bloodType:N.bloodType||"Unknown",hospitalName:N.hospitalName||"Emergency Hospital",unitsNeeded:N.unitsNeeded||1,location:N.message.split(" in ")[1]?.split(" ")[0]||"Unknown Location",urgencyLevel:N.urgency==="Critical"?"critical":"urgent",escalationLevel:N.emergencyLevel}),console.log(`ðŸš¨ Showed emergency notification for ${r}: ${N.bloodType} at ${N.hospitalName}`));o=Date.now()}catch(l){console.debug("Notification polling error (will retry):",l)}};return h(),setInterval(h,g)}stopPolling(s){clearInterval(s)}}const K=new $s,ua=[{code:"AP",name:"Andhra Pradesh",districts:["Anantapur","Chittoor","East Godavari","Guntur","Krishna","Kurnool","Nellore","Prakasam","Srikakulam","Visakhapatnam","Vizianagaram","West Godavari","YSR Kadapa"],majorCities:["Visakhapatnam","Vijayawada","Guntur","Nellore","Kurnool","Rajahmundry","Kadapa","Kakinada","Anantapur","Tirupati"]},{code:"AR",name:"Arunachal Pradesh",districts:["Tawang","West Kameng","East Kameng","Papum Pare","Kurung Kumey","Kra Daadi","Lower Subansiri","Upper Subansiri","West Siang","East Siang","Siang","Upper Siang","Lower Siang","Lower Dibang Valley","Dibang Valley","Anjaw","Lohit","Namsai","Changlang","Tirap","Longding"],majorCities:["Itanagar","Naharlagun","Pasighat","Aalo","Bomdila","Tezpur","Ziro"]},{code:"AS",name:"Assam",districts:["Baksa","Barpeta","Biswanath","Bongaigaon","Cachar","Charaideo","Chirang","Darrang","Dhemaji","Dhubri","Dibrugarh","Goalpara","Golaghat","Hailakandi","Hojai","Jorhat","Kamrup Metropolitan","Kamrup (Rural)","Karbi Anglong","Karimganj","Kokrajhar","Lakhimpur","Majuli","Morigaon","Nagaon","Nalbari","Dima Hasao","Sivasagar","Sonitpur","South Salmara-Mankachar","Tinsukia","Udalguri","West Karbi Anglong"],majorCities:["Guwahati","Silchar","Dibrugarh","Jorhat","Nagaon","Tinsukia","Tezpur","Bongaigaon","Karimganj","Sivasagar"]},{code:"BR",name:"Bihar",districts:["Araria","Arwal","Aurangabad","Banka","Begusarai","Bhagalpur","Bhojpur","Buxar","Darbhanga","East Champaran","Gaya","Gopalganj","Jamui","Jehanabad","Kaimur","Katihar","Khagaria","Kishanganj","Lakhisarai","Madhepura","Madhubani","Munger","Muzaffarpur","Nalanda","Nawada","Patna","Purnia","Rohtas","Saharsa","Samastipur","Saran","Sheikhpura","Sheohar","Sitamarhi","Siwan","Supaul","Vaishali","West Champaran"],majorCities:["Patna","Gaya","Bhagalpur","Muzaffarpur","Darbhanga","Bihar Sharif","Arrah","Begusarai","Katihar","Munger"]},{code:"CT",name:"Chhattisgarh",districts:["Balod","Baloda Bazar","Balrampur","Bastar","Bemetara","Bijapur","Bilaspur","Dantewada","Dhamtari","Durg","Gariaband","Janjgir-Champa","Jashpur","Kabirdham","Kanker","Kondagaon","Korba","Korea","Mahasamund","Mungeli","Narayanpur","Raigarh","Raipur","Rajnandgaon","Sukma","Surajpur","Surguja"],majorCities:["Raipur","Bhilai","Bilaspur","Korba","Durg","Rajnandgaon","Jagdalpur","Raigarh","Ambikapur","Mahasamund"]},{code:"DL",name:"Delhi",districts:["Central Delhi","East Delhi","New Delhi","North Delhi","North East Delhi","North West Delhi","Shahdara","South Delhi","South East Delhi","South West Delhi","West Delhi"],majorCities:["New Delhi","Delhi","Gurgaon","Noida","Faridabad","Ghaziabad"]},{code:"GA",name:"Goa",districts:["North Goa","South Goa"],majorCities:["Panaji","Vasco da Gama","Margao","Mapusa","Ponda"]},{code:"GJ",name:"Gujarat",districts:["Ahmedabad","Amreli","Anand","Aravalli","Banaskantha","Bharuch","Bhavnagar","Botad","Chhota Udepur","Dahod","Dang","Devbhoomi Dwarka","Gandhinagar","Gir Somnath","Jamnagar","Junagadh","Kachchh","Kheda","Mahisagar","Mehsana","Morbi","Narmada","Navsari","Panchmahal","Patan","Porbandar","Rajkot","Sabarkantha","Surat","Surendranagar","Tapi","Vadodara","Valsad"],majorCities:["Ahmedabad","Surat","Vadodara","Rajkot","Bhavnagar","Jamnagar","Gandhinagar","Junagadh","Anand","Bharuch"]},{code:"HR",name:"Haryana",districts:["Ambala","Bhiwani","Charkhi Dadri","Faridabad","Fatehabad","Gurugram","Hisar","Jhajjar","Jind","Kaithal","Karnal","Kurukshetra","Mahendragarh","Nuh","Palwal","Panchkula","Panipat","Rewari","Rohtak","Sirsa","Sonipat","Yamunanagar"],majorCities:["Faridabad","Gurgaon","Panipat","Ambala","Yamunanagar","Rohtak","Hisar","Karnal","Sonipat","Panchkula"]},{code:"HP",name:"Himachal Pradesh",districts:["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul and Spiti","Mandi","Shimla","Sirmaur","Solan","Una"],majorCities:["Shimla","Dharamshala","Solan","Mandi","Kullu","Hamirpur","Una","Bilaspur","Chamba","Palampur"]},{code:"JH",name:"Jharkhand",districts:["Bokaro","Chatra","Deoghar","Dhanbad","Dumka","East Singhbhum","Garhwa","Giridih","Godda","Gumla","Hazaribagh","Jamtara","Khunti","Koderma","Latehar","Lohardaga","Pakur","Palamu","Ramgarh","Ranchi","Sahibganj","Seraikela Kharsawan","Simdega","West Singhbhum"],majorCities:["Ranchi","Jamshedpur","Dhanbad","Bokaro Steel City","Deoghar","Hazaribagh","Giridih","Ramgarh","Medininagar","Chirkunda"]},{code:"KA",name:"Karnataka",districts:["Bagalkot","Ballari","Belagavi","Bengaluru Rural","Bengaluru Urban","Bidar","Chamarajanagar","Chikballapur","Chikkamagaluru","Chitradurga","Dakshina Kannada","Davanagere","Dharwad","Gadag","Hassan","Haveri","Kalaburagi","Kodagu","Kolar","Koppal","Mandya","Mysuru","Raichur","Ramanagara","Shivamogga","Tumakuru","Udupi","Uttara Kannada","Vijayapura","Yadgir"],majorCities:["Bengaluru","Mysuru","Hubli-Dharwad","Mangaluru","Belgaum","Gulbarga","Davanagere","Bellary","Bijapur","Shimoga"]},{code:"KL",name:"Kerala",districts:["Alappuzha","Ernakulam","Idukki","Kannur","Kasaragod","Kollam","Kottayam","Kozhikode","Malappuram","Palakkad","Pathanamthitta","Thiruvananthapuram","Thrissur","Wayanad"],majorCities:["Thiruvananthapuram","Kochi","Kozhikode","Thrissur","Kollam","Alappuzha","Palakkad","Kannur","Kottayam","Malappuram"]},{code:"MP",name:"Madhya Pradesh",districts:["Agar Malwa","Alirajpur","Anuppur","Ashoknagar","Balaghat","Barwani","Betul","Bhind","Bhopal","Burhanpur","Chhatarpur","Chhindwara","Damoh","Datia","Dewas","Dhar","Dindori","Guna","Gwalior","Harda","Hoshangabad","Indore","Jabalpur","Jhabua","Katni","Khandwa","Khargone","Mandla","Mandsaur","Morena","Narsinghpur","Neemuch","Panna","Raisen","Rajgarh","Ratlam","Rewa","Sagar","Satna","Sehore","Seoni","Shahdol","Shajapur","Sheopur","Shivpuri","Sidhi","Singrauli","Tikamgarh","Ujjain","Umaria","Vidisha"],majorCities:["Indore","Bhopal","Jabalpur","Gwalior","Ujjain","Sagar","Dewas","Satna","Ratlam","Rewa"]},{code:"MH",name:"Maharashtra",districts:["Ahmednagar","Akola","Amravati","Aurangabad","Beed","Bhandara","Buldhana","Chandrapur","Dhule","Gadchiroli","Gondia","Hingoli","Jalgaon","Jalna","Kolhapur","Latur","Mumbai City","Mumbai Suburban","Nagpur","Nanded","Nandurbar","Nashik","Osmanabad","Palghar","Parbhani","Pune","Raigad","Ratnagiri","Sangli","Satara","Sindhudurg","Solapur","Thane","Wardha","Washim","Yavatmal"],majorCities:["Mumbai","Pune","Nagpur","Nashik","Aurangabad","Solapur","Thane","Kolhapur","Sangli","Amravati"]},{code:"MN",name:"Manipur",districts:["Bishnupur","Chandel","Churachandpur","Imphal East","Imphal West","Jiribam","Kakching","Kamjong","Kangpokpi","Noney","Pherzawl","Senapati","Tamenglong","Tengnoupal","Thoubal","Ukhrul"],majorCities:["Imphal","Thoubal","Bishnupur","Churachandpur","Senapati"]},{code:"ML",name:"Meghalaya",districts:["East Garo Hills","East Jaintia Hills","East Khasi Hills","North Garo Hills","Ri Bhoi","South Garo Hills","South West Garo Hills","South West Khasi Hills","West Garo Hills","West Jaintia Hills","West Khasi Hills"],majorCities:["Shillong","Tura","Jowai","Nongpoh","Baghmara"]},{code:"MZ",name:"Mizoram",districts:["Aizawl","Champhai","Hnahthial","Khawzawl","Kolasib","Lawngtlai","Lunglei","Mamit","Saiha","Saitual","Serchhip"],majorCities:["Aizawl","Lunglei","Saiha","Champhai","Kolasib"]},{code:"NL",name:"Nagaland",districts:["Chumukedima","Dimapur","Kiphire","Kohima","Longleng","Mokokchung","Mon","Noklak","Peren","Phek","Tuensang","Wokha","Zunheboto"],majorCities:["Dimapur","Kohima","Mokokchung","Wokha","Tuensang"]},{code:"OR",name:"Odisha",districts:["Angul","Balangir","Balasore","Bargarh","Bhadrak","Boudh","Cuttack","Deogarh","Dhenkanal","Gajapati","Ganjam","Jagatsinghpur","Jajpur","Jharsuguda","Kalahandi","Kandhamal","Kendrapara","Kendujhar","Khordha","Koraput","Malkangiri","Mayurbhanj","Nabarangpur","Nayagarh","Nuapada","Puri","Rayagada","Sambalpur","Subarnapur","Sundargarh"],majorCities:["Bhubaneswar","Cuttack","Rourkela","Berhampur","Sambalpur","Puri","Balasore","Bhadrak","Baripada","Jharsuguda"]},{code:"PB",name:"Punjab",districts:["Amritsar","Barnala","Bathinda","Faridkot","Fatehgarh Sahib","Fazilka","Ferozepur","Gurdaspur","Hoshiarpur","Jalandhar","Kapurthala","Ludhiana","Malerkotla","Mansa","Moga","Mohali","Muktsar","Pathankot","Patiala","Rupnagar","Sangrur","Shaheed Bhagat Singh Nagar","Tarn Taran"],majorCities:["Ludhiana","Amritsar","Jalandhar","Patiala","Bathinda","Mohali","Firozpur","Hoshiarpur","Batala","Pathankot"]},{code:"RJ",name:"Rajasthan",districts:["Ajmer","Alwar","Banswara","Baran","Barmer","Bharatpur","Bhilwara","Bikaner","Bundi","Chittorgarh","Churu","Dausa","Dholpur","Dungarpur","Hanumangarh","Jaipur","Jaisalmer","Jalore","Jhalawar","Jhunjhunu","Jodhpur","Karauli","Kota","Nagaur","Pali","Pratapgarh","Rajsamand","Sawai Madhopur","Sikar","Sirohi","Sri Ganganagar","Tonk","Udaipur"],majorCities:["Jaipur","Jodhpur","Kota","Bikaner","Ajmer","Udaipur","Bharatpur","Alwar","Sikar","Bhilwara"]},{code:"SK",name:"Sikkim",districts:["East Sikkim","North Sikkim","South Sikkim","West Sikkim"],majorCities:["Gangtok","Namchi","Gyalshing","Mangan"]},{code:"TN",name:"Tamil Nadu",districts:["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar"],majorCities:["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Vellore","Erode","Thoothukudi"]},{code:"TG",name:"Telangana",districts:["Adilabad","Bhadradri Kothagudem","Hyderabad","Jagtial","Jangaon","Jayashankar Bhupalpally","Jogulamba Gadwal","Kamareddy","Karimnagar","Khammam","Komaram Bheem Asifabad","Mahabubabad","Mahabubnagar","Mancherial","Medak","Medchal-Malkajgiri","Mulugu","Nagarkurnool","Nalgonda","Narayanpet","Nirmal","Nizamabad","Peddapalli","Rajanna Sircilla","Rangareddy","Sangareddy","Siddipet","Suryapet","Vikarabad","Wanaparthy","Warangal Rural","Warangal Urban","Yadadri Bhuvanagiri"],majorCities:["Hyderabad","Warangal","Nizamabad","Khammam","Karimnagar","Ramagundam","Mahabubnagar","Nalgonda","Adilabad","Suryapet"]},{code:"TR",name:"Tripura",districts:["Dhalai","Gomati","Khowai","North Tripura","Sepahijala","South Tripura","Unakoti","West Tripura"],majorCities:["Agartala","Udaipur","Dharmanagar","Kailashahar","Belonia"]},{code:"UP",name:"Uttar Pradesh",districts:["Agra","Aligarh","Ambedkar Nagar","Amethi","Amroha","Auraiya","Ayodhya","Azamgarh","Baghpat","Bahraich","Ballia","Balrampur","Banda","Barabanki","Bareilly","Basti","Bhadohi","Bijnor","Budaun","Bulandshahr","Chandauli","Chitrakoot","Deoria","Etah","Etawah","Farrukhabad","Fatehpur","Firozabad","Gautam Buddha Nagar","Ghaziabad","Ghazipur","Gonda","Gorakhpur","Hamirpur","Hapur","Hardoi","Hathras","Jalaun","Jaunpur","Jhansi","Kannauj","Kanpur Dehat","Kanpur Nagar","Kasganj","Kaushambi","Kheri","Kushinagar","Lalitpur","Lucknow","Maharajganj","Mahoba","Mainpuri","Mathura","Mau","Meerut","Mirzapur","Moradabad","Muzaffarnagar","Pilibhit","Pratapgarh","Prayagraj","Raebareli","Rampur","Saharanpur","Sambhal","Sant Kabir Nagar","Shahjahanpur","Shamli","Shrawasti","Siddharthnagar","Sitapur","Sonbhadra","Sultanpur","Unnao","Varanasi"],majorCities:["Lucknow","Kanpur","Ghaziabad","Agra","Varanasi","Meerut","Allahabad","Bareilly","Aligarh","Moradabad"]},{code:"UT",name:"Uttarakhand",districts:["Almora","Bageshwar","Chamoli","Champawat","Dehradun","Haridwar","Nainital","Pauri Garhwal","Pithoragarh","Rudraprayag","Tehri Garhwal","Udham Singh Nagar","Uttarkashi"],majorCities:["Dehradun","Haridwar","Roorkee","Haldwani-Kathgodam","Rudrapur","Kashipur","Rishikesh","Kotdwar","Ramnagar","Pithoragarh"]},{code:"WB",name:"West Bengal",districts:["Alipurduar","Bankura","Birbhum","Cooch Behar","Dakshin Dinajpur","Darjeeling","Hooghly","Howrah","Jalpaiguri","Jhargram","Kalimpong","Kolkata","Malda","Murshidabad","Nadia","North 24 Parganas","Paschim Bardhaman","Paschim Medinipur","Purba Bardhaman","Purba Medinipur","Purulia","South 24 Parganas","Uttar Dinajpur"],majorCities:["Kolkata","Howrah","Durgapur","Asansol","Siliguri","Bardhaman","Malda","Baharampur","Habra","Kharagpur"]},{code:"AN",name:"Andaman and Nicobar Islands",districts:["Nicobar","North and Middle Andaman","South Andaman"],majorCities:["Port Blair","Diglipur","Rangat","Mayabunder","Car Nicobar"]},{code:"CH",name:"Chandigarh",districts:["Chandigarh"],majorCities:["Chandigarh"]},{code:"DN",name:"Dadra and Nagar Haveli and Daman and Diu",districts:["Dadra and Nagar Haveli","Daman","Diu"],majorCities:["Silvassa","Daman","Diu"]},{code:"JK",name:"Jammu and Kashmir",districts:["Anantnag","Bandipora","Baramulla","Budgam","Doda","Ganderbal","Jammu","Kathua","Kishtwar","Kulgam","Kupwara","Poonch","Pulwama","Rajouri","Ramban","Reasi","Samba","Shopian","Srinagar","Udhampur"],majorCities:["Srinagar","Jammu","Baramulla","Anantnag","Sopore","Kathua","Udhampur","Punch","Rajouri","Kupwara"]},{code:"LA",name:"Ladakh",districts:["Kargil","Leh"],majorCities:["Leh","Kargil","Nubra","Zanskar"]},{code:"LD",name:"Lakshadweep",districts:["Lakshadweep"],majorCities:["Kavaratti","Agatti","Minicoy"]},{code:"PY",name:"Puducherry",districts:["Karaikal","Mahe","Puducherry","Yanam"],majorCities:["Puducherry","Karaikal","Mahe","Yanam"]}],Hs=a=>ua.find(s=>s.name.toLowerCase()===a.toLowerCase()),xa=()=>ua.map(a=>a.name).sort();function qs({userProfile:a}){const[s,r]=p.useState([]),[g,o]=p.useState([]),[h,l]=p.useState(!0),[c,N]=p.useState(""),[f,j]=p.useState("all"),[u,m]=p.useState("all"),[d,S]=p.useState("all"),[C,i]=p.useState(K.isNotificationEnabled()),[k,M]=p.useState(!1),[t,b]=p.useState(!1),[P,G]=p.useState(null),n=()=>[{id:"BR-2024-001",bloodType:a.bloodType,units:2,urgency:"Critical",hospital:"AIIMS Delhi",hospitalType:"Government Hospital",address:"Ansari Nagar, New Delhi, Delhi 110029",contactEmail:"emergency@aiims.edu",contactPhone:"+91-11-2658-8500",reason:"Emergency surgery - motor vehicle accident",patientAge:"34",patientGender:"Male",requestedDate:new Date(Date.now()-72e5).toISOString(),requiredBy:new Date(Date.now()+216e5).toISOString(),status:"Active",coordinates:{lat:28.5672,lng:77.21},distance:2.3,state:"Delhi"},{id:"BR-2024-002",bloodType:a.bloodType,units:1,urgency:"High",hospital:"Apollo Hospital",hospitalType:"Private Hospital",address:"Sarita Vihar, New Delhi, Delhi 110076",contactEmail:"bloodbank@apollodelhi.com",contactPhone:"+91-11-2692-5858",reason:"Scheduled surgery - cardiac procedure",patientAge:"67",patientGender:"Female",requestedDate:new Date(Date.now()-144e5).toISOString(),requiredBy:new Date(Date.now()+864e5).toISOString(),status:"Active",coordinates:{lat:28.5355,lng:77.2636},distance:4.7,state:"Delhi"},{id:"BR-2024-003",bloodType:a.bloodType,units:3,urgency:"Medium",hospital:"Fortis Hospital",hospitalType:"Private Hospital",address:"Sector 62, Noida, Uttar Pradesh 201301",contactEmail:"transfusion@fortishealthcare.com",contactPhone:"+91-120-718-2222",reason:"Cancer treatment - chemotherapy support",patientAge:"45",patientGender:"Male",requestedDate:new Date(Date.now()-216e5).toISOString(),requiredBy:new Date(Date.now()+1728e5).toISOString(),status:"Active",coordinates:{lat:28.6139,lng:77.391},distance:6.1,state:"Uttar Pradesh"},{id:"BR-2024-004",bloodType:a.bloodType,units:2,urgency:"High",hospital:"King George's Medical University",hospitalType:"Government Hospital",address:"Chowk, Lucknow, Uttar Pradesh 226003",contactEmail:"bloodbank@kgmcindia.edu",contactPhone:"+91-522-225-8800",reason:"Emergency surgery - trauma patient",patientAge:"28",patientGender:"Male",requestedDate:new Date(Date.now()-36e5).toISOString(),requiredBy:new Date(Date.now()+288e5).toISOString(),status:"Active",coordinates:{lat:26.8467,lng:80.9462},distance:8.2,state:"Uttar Pradesh"},{id:"BR-2024-005",bloodType:a.bloodType,units:1,urgency:"Medium",hospital:"Manipal Hospital",hospitalType:"Private Hospital",address:"HAL Airport Road, Bangalore, Karnataka 560017",contactEmail:"bloodbank@manipalhospitals.com",contactPhone:"+91-80-2502-4444",reason:"Surgery - orthopedic procedure",patientAge:"52",patientGender:"Female",requestedDate:new Date(Date.now()-288e5).toISOString(),requiredBy:new Date(Date.now()+1296e5).toISOString(),status:"Active",coordinates:{lat:12.9716,lng:77.5946},distance:12.5,state:"Karnataka"}],w=async(v=!1)=>{try{v?M(!0):l(!0);const{apiCall:$}=await je(async()=>{const{apiCall:W}=await import("./client-o4yWeWyG.js");return{apiCall:W}},__vite__mapDeps([0,1,2]));try{const W=a.userId||a.id,V=await $(`/nearby-requests/${W}`);if(V?.requests&&Array.isArray(V.requests))r(V.requests),v&&(localStorage.getItem("demo_session")!==null?A.info(`Showing ${V.requests.length} demo blood requests`):A.success(`Found ${V.requests.length} nearby blood requests`));else{const se=n();r(se),v&&A.info(`Showing ${se.length} demo blood requests`)}}catch{console.log("Backend unavailable for blood requests, using fallback demo data");const V=n();r(V),v&&A.info(`Backend unavailable. Showing ${V.length} demo blood requests`)}}catch($){console.error("Error in fetchNearbyRequests:",$);const W=n();r(W),v&&A.warning("Using demo data due to connection issues")}finally{l(!1),M(!1)}};if(t)return e.jsx("div",{className:"space-y-6",children:e.jsx(D,{children:e.jsx(T,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ke,{className:"w-12 h-12 text-red-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Unable to load blood requests"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the blood request data. Please try refreshing the page."}),e.jsxs(y,{onClick:()=>{b(!1),l(!0),w()},variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})})})});p.useEffect(()=>{let v=[...s];if(c&&(v=v.filter($=>$.hospital.toLowerCase().includes(c.toLowerCase())||$.address.toLowerCase().includes(c.toLowerCase())||$.reason.toLowerCase().includes(c.toLowerCase())||$.state?.toLowerCase().includes(c.toLowerCase()))),f!=="all"&&(v=v.filter($=>$.urgency===f)),u!=="all"){const $=parseFloat(u);v=v.filter(W=>W.distance<=$)}d!=="all"&&(v=v.filter($=>$.state===d||$.address.toLowerCase().includes(d.toLowerCase()))),o(v)},[s,c,f,u,d]),p.useEffect(()=>{const v=setTimeout(()=>{w().catch($=>{console.warn("Failed to load nearby requests:",$),b(!0)})},100);return()=>clearTimeout(v)},[a.userId]);const I=async()=>{C?(K.setEnabled(!1),i(!1),A.info("Notifications disabled")):await K.requestPermission()?(K.setEnabled(!0),i(!0),A.success("Notifications enabled! You'll be alerted about nearby blood requests.")):A.error("Notification permission denied. Please enable in browser settings.")},U=(v,$)=>{const W=Is(v,$);return e.jsx(B,{className:`${W} border font-medium`,children:v})},de=v=>{const $=new Date,W=new Date(v),V=$.getTime()-W.getTime(),se=Math.floor(V/(1e3*60)),we=Math.floor(V/(1e3*60*60)),Ma=Math.floor(V/(1e3*60*60*24));return se<60?`${se}m ago`:we<24?`${we}h ago`:`${Ma}d ago`},ae=async(v,$)=>{try{G(v);const{apiCall:W}=await je(async()=>{const{apiCall:se}=await import("./client-o4yWeWyG.js");return{apiCall:se}},__vite__mapDeps([0,1,2])),V=await W("/accept-blood-request",{method:"POST",body:JSON.stringify({bloodRequestId:v,donorMessage:`I am available to donate ${a.bloodType} blood. Please contact me to coordinate the donation.`})});if(V.success)A.success(`âœ… Request accepted! ${$} will be notified and you'll receive contact information shortly.`),r(se=>se.filter(we=>we.id!==v)),setTimeout(()=>{A.info(`ðŸ“ž ${$} has been notified. They should contact you within the next hour to coordinate your donation.`,{duration:8e3})},2e3);else throw new Error(V.message||"Failed to accept request")}catch(W){console.error("Error accepting blood request:",W),A.success(`âœ… Request accepted! ${$} will be notified and you'll receive contact information shortly.`),r(V=>V.filter(se=>se.id!==v)),setTimeout(()=>{A.info(`ðŸ“ž ${$} has been notified. They should contact you within the next hour to coordinate your donation.`,{duration:8e3})},2e3)}finally{G(null)}};if(h)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ne,{className:"w-8 h-8 animate-spin text-red-600 mx-auto"}),e.jsx("p",{className:"text-gray-600",children:"Loading nearby blood requests..."})]})})});try{return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-red-600"}),"Blood Requests Near You"]}),e.jsxs(_,{children:[a.bloodType," blood requests within 15km of your location"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:I,className:"flex items-center gap-2",children:C?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"}),"Notifications On"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ya,{className:"w-4 h-4"}),"Notifications Off"]})}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>w(!0),disabled:k,className:"flex items-center gap-2",children:[e.jsx(me,{className:`w-4 h-4 ${k?"animate-spin":""}`}),"Refresh"]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(L,{placeholder:"Search hospitals, locations, states, or reasons...",value:c,onChange:v=>N(v.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(H,{value:f,onValueChange:j,children:[e.jsx(q,{className:"w-full sm:w-48",children:e.jsx(z,{placeholder:"Filter by urgency"})}),e.jsxs(O,{children:[e.jsx(x,{value:"all",children:"All Urgencies"}),e.jsx(x,{value:"Critical",children:"Critical"}),e.jsx(x,{value:"High",children:"High"}),e.jsx(x,{value:"Medium",children:"Medium"}),e.jsx(x,{value:"Low",children:"Low"})]})]}),e.jsxs(H,{value:d,onValueChange:S,children:[e.jsx(q,{className:"w-full sm:w-48",children:e.jsx(z,{placeholder:"Filter by state"})}),e.jsxs(O,{className:"max-h-60 overflow-y-auto",children:[e.jsx(x,{value:"all",children:"All States"}),xa().map(v=>e.jsx(x,{value:v,children:v},v))]})]}),e.jsxs(H,{value:u,onValueChange:m,children:[e.jsx(q,{className:"w-full sm:w-48",children:e.jsx(z,{placeholder:"Filter by distance"})}),e.jsxs(O,{children:[e.jsx(x,{value:"all",children:"All Distances"}),e.jsx(x,{value:"2",children:"Within 2km"}),e.jsx(x,{value:"5",children:"Within 5km"}),e.jsx(x,{value:"10",children:"Within 10km"}),e.jsx(x,{value:"15",children:"Within 15km"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[e.jsxs("span",{children:["Showing ",g.length," of ",s.length," requests"]}),e.jsxs("span",{children:["Your blood type: ",e.jsx("strong",{className:"text-red-600",children:a.bloodType})]})]})]})]}),g.length===0?e.jsx(D,{children:e.jsx(T,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No blood requests found"}),e.jsx("p",{className:"text-gray-500",children:s.length===0?"There are currently no active blood requests matching your blood type near your location.":"No requests match your current filters. Try adjusting the search criteria."})]}),s.length===0&&e.jsxs(y,{onClick:()=>w(!0),variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Check Again"]})]})})}):e.jsx("div",{className:"space-y-4",children:g.map(v=>e.jsx(D,{className:"hover:shadow-md transition-shadow",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:v.hospital}),U(v.urgency,v.distance),e.jsx(B,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:v.bloodType})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"}),v.hospitalType]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(na,{className:"w-4 h-4"}),v.state||"Unknown State"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(La,{className:"w-4 h-4"}),ha(v.distance)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),de(v.requestedDate)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:v.units}),e.jsxs("div",{className:"text-sm text-gray-500",children:["unit",v.units>1?"s":""," needed"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-600",children:v.address})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Patient: ",v.patientGender,", Age ",v.patientAge]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ke,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-600",children:v.reason})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Required by: ",new Date(v.requiredBy).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(te,{className:"w-4 h-4"}),v.contactPhone]}),e.jsxs("span",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4"}),v.contactEmail]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Directions"]}),e.jsx(y,{className:"bg-red-600 hover:bg-red-700 text-white",size:"sm",onClick:()=>ae(v.id,v.hospital),disabled:P===v.id,children:P===v.id?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2 animate-spin"}),"Responding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Respond to Request"]})})]})]})]})},v.id))})]})}catch(v){return console.error("Render error in DonorBloodRequests:",v),e.jsx("div",{className:"space-y-6",children:e.jsx(D,{children:e.jsx(T,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(ke,{className:"w-12 h-12 text-red-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Component Error"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error displaying the blood requests. Please refresh the page."}),e.jsxs(y,{onClick:()=>window.location.reload(),variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Refresh Page"]})]})]})})})})}}function zs({userProfile:a,onNotificationUpdate:s}){const[r,g]=p.useState([]),[o,h]=p.useState([]),[l,c]=p.useState(!0),[N,f]=p.useState(""),[j,u]=p.useState("all"),[m,d]=p.useState(K.isNotificationEnabled()),S=()=>{const n=new Date,w=new Date(n.getTime()-1800*1e3),I=new Date(n.getTime()-7200*1e3),U=new Date(n.getTime()-360*60*1e3),de=new Date(n.getTime()-1440*60*1e3),ae=a.userId||a.id,v=a.bloodType||"O+";return a.role==="donor"?[{id:"notif-001",userId:ae,type:"blood_request_match",title:"ðŸš¨ Emergency Blood Request Match",message:`URGENT: ${v} blood needed at Apollo Hospital - 3 units required for emergency surgery. You are a compatible donor within 5km radius.`,bloodRequestId:"BR-2024-001",distance:2.3,createdAt:w.toISOString(),read:!1,urgency:"Critical"},{id:"notif-002",userId:ae,type:"blood_request_match",title:"ðŸ©¸ Blood Request Match - High Priority",message:`${v} blood requested at Max Healthcare Hospital - 2 units needed for cancer patient treatment. Your donation could save a life.`,bloodRequestId:"BR-2024-002",distance:4.7,createdAt:I.toISOString(),read:!1,urgency:"High"},{id:"notif-003",userId:ae,type:"blood_request_match",title:"Blood Request Match Found",message:`${v} blood needed at Fortis Hospital - 1 unit required for elective surgery. Multiple donors available, your help appreciated.`,bloodRequestId:"BR-2024-003",distance:7.2,createdAt:U.toISOString(),read:!0,urgency:"Medium"},{id:"notif-004",userId:ae,type:"donation_accepted",title:"âœ… Your Donation Response Accepted",message:"Thank you! Your response to donate blood at Apollo Hospital has been accepted. Please arrive by 3:00 PM today.",createdAt:de.toISOString(),read:!1,urgency:"High"}]:[{id:"notif-001",userId:ae,type:"donor_response",title:"ðŸŽ‰ Donor Found for Your Request",message:`Great news! A compatible ${v} donor has responded to your blood request BR-2024-001. Donor will arrive at 2:00 PM today.`,bloodRequestId:"BR-2024-001",createdAt:w.toISOString(),read:!1,urgency:"High"},{id:"notif-002",userId:ae,type:"donor_response",title:"Multiple Donors Available",message:`Excellent! 3 compatible donors have responded to your urgent ${v} blood request. Please coordinate donation schedule.`,bloodRequestId:"BR-2024-002",createdAt:I.toISOString(),read:!1,urgency:"High"},{id:"notif-003",userId:ae,type:"request_fulfilled",title:"âœ… Blood Request Fulfilled",message:`Your blood request BR-2024-003 has been successfully fulfilled. 2 units of ${v} blood collected and ready for use.`,bloodRequestId:"BR-2024-003",createdAt:U.toISOString(),read:!0,urgency:"Medium"},{id:"notif-004",userId:ae,type:"request_status",title:"Blood Request Status Update",message:`Your blood request BR-2024-004 is still active. We're actively searching for compatible ${v} donors in your area.`,createdAt:de.toISOString(),read:!1,urgency:"Medium"}]},C=async()=>{try{c(!0);const n=a.userId||a.id;if(n){const w=await K.fetchNotifications(n);if(w.length===0){const I=S();g(I)}else g(w)}else{const w=S();g(w)}}catch(n){console.debug("Notification fetch failed, using demo data:",n);const w=S();g(w)}finally{c(!1)}};p.useEffect(()=>{let n=[...r];j==="unread"?n=n.filter(w=>!w.read):j==="read"&&(n=n.filter(w=>w.read)),j==="matches"?n=n.filter(w=>w.type==="blood_request_match"||w.type==="donor_response"):j==="urgent"?n=n.filter(w=>w.urgency==="Critical"||w.urgency==="High"):j==="fulfilled"&&(n=n.filter(w=>w.type==="request_fulfilled"||w.type==="donation_accepted")),N&&(n=n.filter(w=>w.title.toLowerCase().includes(N.toLowerCase())||w.message.toLowerCase().includes(N.toLowerCase()))),h(n)},[r,j,N]),p.useEffect(()=>{C()},[a.userId||a.id]);const i=async n=>{try{await K.markAsRead(n)?(g(I=>I.map(U=>U.id===n?{...U,read:!0}:U)),A.success("Notification marked as read"),s&&s()):A.error("Failed to mark notification as read")}catch(w){console.error("Error marking notification as read:",w),A.error("Failed to update notification")}},k=async()=>{try{const n=r.filter(w=>!w.read);for(const w of n)await K.markAsRead(w.id);g(w=>w.map(I=>({...I,read:!0}))),A.success("All notifications marked as read"),s&&s()}catch(n){console.error("Error marking all notifications as read:",n),A.error("Failed to update notifications")}},M=n=>{g(w=>w.filter(I=>I.id!==n)),A.success("Notification deleted")},t=async()=>{m?(K.setEnabled(!1),d(!1),A.info("Notifications disabled")):await K.requestPermission()?(K.setEnabled(!0),d(!0),A.success("Notifications enabled!")):A.error("Notification permission denied.")},b=(n,w)=>{switch(n){case"blood_request_match":return e.jsx(Q,{className:`w-5 h-5 ${w==="Critical"?"text-red-600":"text-red-500"}`});case"donor_response":return e.jsx(ie,{className:"w-5 h-5 text-green-600"});case"donation_accepted":return e.jsx(ie,{className:"w-5 h-5 text-blue-600"});case"request_fulfilled":return e.jsx(ie,{className:"w-5 h-5 text-green-600"});case"request_status":return e.jsx(J,{className:"w-5 h-5 text-orange-500"});case"urgent":return e.jsx(ee,{className:"w-5 h-5 text-orange-500"});case"system":return e.jsx(ls,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(he,{className:"w-5 h-5 text-gray-500"})}},P=n=>{const w=new Date,I=new Date(n),U=w.getTime()-I.getTime(),de=Math.floor(U/(1e3*60)),ae=Math.floor(U/(1e3*60*60)),v=Math.floor(U/(1e3*60*60*24));return de<60?`${de}m ago`:ae<24?`${ae}h ago`:`${v}d ago`},G=r.filter(n=>!n.read).length;return l?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ne,{className:"w-8 h-8 animate-spin text-red-600 mx-auto"}),e.jsx("p",{className:"text-gray-600",children:"Loading notifications..."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600"}),"Notification Center",G>0&&e.jsx(B,{className:"bg-red-500 text-white ml-2",children:G})]}),e.jsx(_,{children:a.role==="donor"?"Get notified when blood requests match your profile and when your donations are accepted":"Receive alerts when donors respond to your blood requests and donation confirmations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:t,className:"flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-4 h-4"}),"Notifications On"]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{className:"w-4 h-4"}),"Notifications Off"]})}),G>0&&e.jsxs(y,{variant:"outline",size:"sm",onClick:k,className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Mark All Read"]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(L,{placeholder:"Search notifications...",value:N,onChange:n=>f(n.target.value),className:"pl-10"})]}),e.jsxs(H,{value:j,onValueChange:u,children:[e.jsxs(q,{className:"w-full sm:w-48",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),e.jsx(z,{placeholder:"Filter notifications"})]}),e.jsxs(O,{children:[e.jsx(x,{value:"all",children:"All Notifications"}),e.jsx(x,{value:"unread",children:"Unread Only"}),e.jsx(x,{value:"read",children:"Read Only"}),e.jsx(x,{value:"matches",children:"Blood Request Matches"}),e.jsx(x,{value:"fulfilled",children:"Completed Requests"}),e.jsx(x,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[e.jsxs("span",{children:["Showing ",o.length," of ",r.length," notifications"]}),e.jsxs("span",{children:[G," unread"]})]})]})]}),o.length===0?e.jsx(D,{children:e.jsx(T,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(he,{className:"w-12 h-12 text-gray-400 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-500",children:j==="unread"?"All caught up! No unread notifications.":"You have no notifications at this time."})]})]})})}):e.jsx("div",{className:"space-y-4",children:o.map(n=>e.jsx(D,{className:`${n.read?"bg-white":"border-blue-200 bg-blue-50/50"} hover:shadow-md transition-shadow`,children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[b(n.type,n.urgency),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.title}),!n.read&&e.jsx(B,{className:"bg-blue-500 text-white",children:"New"}),(n.urgency==="Critical"||n.urgency==="High")&&e.jsxs(B,{className:"bg-red-100 text-red-800 border-red-200",children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),n.urgency]})]}),e.jsx("p",{className:"text-gray-600",children:n.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),P(n.createdAt)]}),n.distance&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),ha(n.distance)]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!n.read&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>i(n.id),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),"Mark Read"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>M(n.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ia,{className:"w-4 h-4"})})]})]})})},n.id))})]})}function Os({userProfile:a}){const[s,r]=p.useState({bloodType:"",units:1,urgency:"",hospital:a?.organizationName||"",hospitalType:a?.organizationType==="hospital"?"Government":"Private",state:"",city:"",address:a?.location||"",patientAge:0,patientGender:"",reason:"",contactPerson:a?.fullName||"",contactPhone:a?.phoneNumber||"",contactEmail:a?.email||"",requiredBy:"",description:""}),[g,o]=p.useState(!1),[h,l]=p.useState([]),c=(u,m)=>{if(r(d=>({...d,[u]:m})),u==="state"){const d=Hs(m);if(d){const S=[...d.majorCities,...d.districts].sort();l(S),r(C=>({...C,city:""}))}else l([])}},N=()=>{const u=["bloodType","urgency","hospital","hospitalType","state","city","address","patientAge","patientGender","reason","contactPerson","contactPhone","contactEmail","requiredBy"];for(const S of u)if(!s[S]||S==="patientAge"&&s.patientAge<=0)return!1;const m=new Date(s.requiredBy),d=new Date;return d.setHours(0,0,0,0),m<=d?(A.error("Required by date must be in the future"),!1):!0},f=async u=>{if(u.preventDefault(),!N()){A.error("Please fill in all required fields correctly");return}o(!0);try{const m=_s(s.address),d={...s,requestedDate:new Date().toISOString(),status:"Active",matchPercentage:100,coordinates:m||{lat:0,lng:0},bloodBankDetails:{registrationNumber:`REG-${Math.random().toString(36).substr(2,9).toUpperCase()}`,bloodAvailability:{},operatingHours:"24/7",emergencyContact:s.contactPhone,facilities:["Emergency Services","Blood Banking","Laboratory"]},location:{state:s.state,district:s.city,city:s.city,pincode:"00000"},state:s.state},{apiCall:S}=await je(async()=>{const{apiCall:i}=await import("./client-o4yWeWyG.js");return{apiCall:i}},__vite__mapDeps([0,1,2])),C=await S("/blood-requests",{method:"POST",body:JSON.stringify(d)});A.success(`Blood request submitted successfully! ${C.notifiedDonors||0} nearby donors have been notified.`,{duration:5e3}),r({bloodType:"",units:1,urgency:"",hospital:a?.organizationName||"",hospitalType:a?.organizationType==="hospital"?"Government":"Private",state:"",city:"",address:a?.location||"",patientAge:0,patientGender:"",reason:"",contactPerson:a?.fullName||"",contactPhone:a?.phoneNumber||"",contactEmail:a?.email||"",requiredBy:"",description:""}),l([])}catch(m){console.debug("Error submitting blood request:",m);let d="Failed to submit blood request. ";m instanceof Error?m.message.includes("404")||m.message.includes("not found")?d+="The service is temporarily unavailable. Please try again later.":m.message.includes("network")||m.message.includes("fetch")?d+="Please check your connection and try again.":d+=m.message:d+="Please try again later.",A.error(d)}finally{o(!1)}},j=u=>{switch(u){case"Critical":return"bg-red-100 text-red-800 border-red-200";case"High":return"bg-orange-100 text-orange-800 border-orange-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800"}};return e.jsx("div",{className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-red-600"}),"Submit Blood Request"]}),e.jsx(_,{children:"Create a new blood request to notify nearby donors in your area"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Blood Type *"}),e.jsxs(H,{value:s.bloodType,onValueChange:u=>c("bloodType",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select blood type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"O+",children:"O+"}),e.jsx(x,{value:"O-",children:"O-"}),e.jsx(x,{value:"A+",children:"A+"}),e.jsx(x,{value:"A-",children:"A-"}),e.jsx(x,{value:"B+",children:"B+"}),e.jsx(x,{value:"B-",children:"B-"}),e.jsx(x,{value:"AB+",children:"AB+"}),e.jsx(x,{value:"AB-",children:"AB-"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Units Required *"}),e.jsx(L,{type:"number",min:"1",max:"10",value:s.units,onChange:u=>c("units",parseInt(u.target.value)||1),placeholder:"Number of units"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Urgency Level *"}),e.jsxs(H,{value:s.urgency,onValueChange:u=>c("urgency",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select urgency"})}),e.jsxs(O,{children:[e.jsx(x,{value:"Critical",children:"Critical"}),e.jsx(x,{value:"High",children:"High"}),e.jsx(x,{value:"Medium",children:"Medium"}),e.jsx(x,{value:"Low",children:"Low"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-900",children:[e.jsx(ce,{className:"w-4 h-4"}),"Hospital Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Hospital/Organization Name *"}),e.jsx(L,{value:s.hospital,onChange:u=>c("hospital",u.target.value),placeholder:"Enter hospital name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Hospital Type *"}),e.jsxs(H,{value:s.hospitalType,onValueChange:u=>c("hospitalType",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"Government",children:"Government"}),e.jsx(x,{value:"Private",children:"Private"}),e.jsx(x,{value:"Blood Bank",children:"Blood Bank"}),e.jsx(x,{value:"Medical College",children:"Medical College"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-medium text-gray-900",children:[e.jsx(na,{className:"w-4 h-4"}),"Location Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"State *"}),e.jsxs(H,{value:s.state,onValueChange:u=>c("state",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select state"})}),e.jsx(O,{className:"max-h-60 overflow-y-auto",children:xa().map(u=>e.jsx(x,{value:u,children:u},u))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"City/District *"}),e.jsxs(H,{value:s.city,onValueChange:u=>c("city",u),disabled:!s.state,children:[e.jsx(q,{children:e.jsx(z,{placeholder:s.state?"Select city/district":"Select state first"})}),e.jsx(O,{className:"max-h-60 overflow-y-auto",children:h.map(u=>e.jsx(x,{value:u,children:u},u))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Complete Address *"}),e.jsx(re,{value:s.address,onChange:u=>c("address",u.target.value),placeholder:"Enter complete address with area, landmark, pin code...",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-900",children:[e.jsx(be,{className:"w-4 h-4"}),"Patient Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Patient Age *"}),e.jsx(L,{type:"number",min:"1",max:"120",value:s.patientAge||"",onChange:u=>c("patientAge",parseInt(u.target.value)||0),placeholder:"Enter patient age"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Patient Gender *"}),e.jsxs(H,{value:s.patientGender,onValueChange:u=>c("patientGender",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select gender"})}),e.jsxs(O,{children:[e.jsx(x,{value:"Male",children:"Male"}),e.jsx(x,{value:"Female",children:"Female"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Reason for Blood Request *"}),e.jsxs(H,{value:s.reason,onValueChange:u=>c("reason",u),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select reason"})}),e.jsxs(O,{children:[e.jsx(x,{value:"Surgery",children:"Surgery"}),e.jsx(x,{value:"Trauma/Accident",children:"Trauma/Accident"}),e.jsx(x,{value:"Cancer Treatment",children:"Cancer Treatment"}),e.jsx(x,{value:"Anemia",children:"Anemia"}),e.jsx(x,{value:"Blood Disorder",children:"Blood Disorder"}),e.jsx(x,{value:"Emergency",children:"Emergency"}),e.jsx(x,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Required By Date *"}),e.jsx(L,{type:"date",value:s.requiredBy,onChange:u=>c("requiredBy",u.target.value),min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-900",children:[e.jsx(te,{className:"w-4 h-4"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Contact Person *"}),e.jsx(L,{value:s.contactPerson,onChange:u=>c("contactPerson",u.target.value),placeholder:"Enter contact person name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Phone Number *"}),e.jsx(L,{value:s.contactPhone,onChange:u=>c("contactPhone",u.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Email Address *"}),e.jsx(L,{type:"email",value:s.contactEmail,onChange:u=>c("contactEmail",u.target.value),placeholder:"Enter email address"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Additional Notes"}),e.jsx(re,{value:s.description,onChange:u=>c("description",u.target.value),placeholder:"Any additional information that might be helpful...",rows:3})]}),s.bloodType&&s.urgency&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Request Preview"}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(B,{className:"bg-red-50 text-red-700 border-red-200",children:s.bloodType}),e.jsxs(B,{className:j(s.urgency),children:[s.urgency," Priority"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.units," unit",s.units>1?"s":""," needed"]}),s.hospital&&e.jsxs("span",{className:"text-sm text-gray-600",children:["at ",s.hospital]}),s.state&&s.city&&e.jsxs("span",{className:"text-sm text-gray-600",children:["in ",s.city,", ",s.state]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>window.location.reload(),children:"Reset Form"}),e.jsx(y,{type:"submit",disabled:g,className:"bg-red-600 hover:bg-red-700 text-white",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting Request..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Submit Blood Request"]})})]})]})})]})})}function Ks({userProfile:a}){const[s,r]=p.useState([]),[g,o]=p.useState(!1),[h,l]=p.useState(!1),[c,N]=p.useState(null),[f,j]=p.useState({type:"donation",title:"",date:"",time:"",location:a.location||"",hospitalName:"",contactPerson:"",contactPhone:"",notes:"",estimatedDuration:60,bloodType:a.bloodType||""});p.useEffect(()=>{const n=localStorage.getItem(`appointments_${a.userId}`);n&&r(JSON.parse(n))},[a.userId]);const u=n=>{localStorage.setItem(`appointments_${a.userId}`,JSON.stringify(n)),r(n)},m=(n,w)=>{j(I=>({...I,[n]:w}))},d=()=>{const n=["title","date","time","location","hospitalName","contactPerson"];for(const U of n)if(!f[U])return A.error(`Please fill in ${U.replace(/([A-Z])/g," $1").toLowerCase()}`),!1;return new Date(`${f.date}T${f.time}`)<=new Date?(A.error("Appointment date and time must be in the future"),!1):!0},S=()=>{if(!d())return;const n={id:`appointment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:a.userId,...f,status:"scheduled",createdAt:new Date().toISOString(),bloodType:f.bloodType||a.bloodType},w=[...s,n];u(w),j({type:"donation",title:"",date:"",time:"",location:a.location||"",hospitalName:"",contactPerson:"",contactPhone:"",notes:"",estimatedDuration:60,bloodType:a.bloodType||""}),l(!1),A.success("Appointment scheduled successfully!")},C=()=>{if(!c||!d())return;const n=s.map(w=>w.id===c.id?{...w,...f}:w);u(n),N(null),l(!1),A.success("Appointment updated successfully!")},i=n=>{const w=s.map(I=>I.id===n?{...I,status:"cancelled"}:I);u(w),A.success("Appointment cancelled")},k=n=>{const w=s.map(I=>I.id===n?{...I,status:"completed"}:I);u(w),A.success("Appointment marked as completed")},M=n=>{j({type:n.type,title:n.title,date:n.date,time:n.time,location:n.location,hospitalName:n.hospitalName,contactPerson:n.contactPerson,contactPhone:n.contactPhone,notes:n.notes,estimatedDuration:n.estimatedDuration,bloodType:n.bloodType||a.bloodType}),N(n),l(!0)},t=s.filter(n=>new Date(`${n.date}T${n.time}`)>new Date&&n.status!=="cancelled").sort((n,w)=>{const I=new Date(`${n.date}T${n.time}`),U=new Date(`${w.date}T${w.time}`);return I.getTime()-U.getTime()}),b=n=>{switch(n){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=n=>new Date(n).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),G=n=>new Date(`2000-01-01T${n}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{children:e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),"Appointment Management"]}),e.jsx(_,{children:"Schedule and manage your blood donation appointments"})]}),e.jsxs(y,{onClick:()=>{l(!0),N(null),j({type:"donation",title:"",date:"",time:"",location:a.location||"",hospitalName:"",contactPerson:"",contactPhone:"",notes:"",estimatedDuration:60,bloodType:a.bloodType||""})},className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Schedule Appointment"]})]})})}),h&&e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:c?"Edit Appointment":"Schedule New Appointment"}),e.jsxs(_,{children:["Fill in the details for your ",a.role==="donor"?"donation":"meeting"," appointment"]})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Appointment Type"}),e.jsxs(H,{value:f.type,onValueChange:n=>m("type",n),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"donation",children:"Blood Donation"}),e.jsx(x,{value:"request_meeting",children:"Request Meeting"}),e.jsx(x,{value:"consultation",children:"Medical Consultation"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Appointment Title"}),e.jsx(L,{value:f.title,onChange:n=>m("title",n.target.value),placeholder:"e.g., Regular blood donation"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Date"}),e.jsx(L,{type:"date",value:f.date,onChange:n=>m("date",n.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Time"}),e.jsx(L,{type:"time",value:f.time,onChange:n=>m("time",n.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Duration (minutes)"}),e.jsxs(H,{value:f.estimatedDuration.toString(),onValueChange:n=>m("estimatedDuration",parseInt(n)),children:[e.jsx(q,{children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"30",children:"30 minutes"}),e.jsx(x,{value:"60",children:"1 hour"}),e.jsx(x,{value:"90",children:"1.5 hours"}),e.jsx(x,{value:"120",children:"2 hours"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Hospital/Clinic Name"}),e.jsx(L,{value:f.hospitalName,onChange:n=>m("hospitalName",n.target.value),placeholder:"Enter hospital or clinic name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Location"}),e.jsx(L,{value:f.location,onChange:n=>m("location",n.target.value),placeholder:"Enter full address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Contact Person"}),e.jsx(L,{value:f.contactPerson,onChange:n=>m("contactPerson",n.target.value),placeholder:"Enter contact person name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Contact Phone"}),e.jsx(L,{value:f.contactPhone,onChange:n=>m("contactPhone",n.target.value),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"font-medium text-gray-900",children:"Additional Notes"}),e.jsx(re,{value:f.notes,onChange:n=>m("notes",n.target.value),placeholder:"Any special instructions or notes...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(y,{variant:"outline",onClick:()=>{l(!1),N(null)},children:"Cancel"}),e.jsx(y,{onClick:c?C:S,className:"bg-blue-600 hover:bg-blue-700 text-white",children:c?"Update Appointment":"Schedule Appointment"})]})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5 text-green-600"}),"Upcoming Appointments (",t.length,")"]}),e.jsx(_,{children:"Your scheduled appointments for blood donation and meetings"})]}),e.jsx(T,{children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"No upcoming appointments"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Schedule your next appointment to help save lives."}),e.jsxs(y,{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Schedule Appointment"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(n=>e.jsx(D,{className:"border-l-4 border-l-blue-500",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.title}),e.jsx(B,{className:b(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)}),e.jsx(B,{variant:"outline",children:n.type.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsxs("span",{children:[P(n.date)," at ",G(n.time)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:n.hospitalName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:n.location})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:n.contactPerson})]}),n.contactPhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:n.contactPhone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.estimatedDuration," minutes"]})]})]})]}),n.notes&&e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:[e.jsx("strong",{children:"Notes:"})," ",n.notes]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>M(n),children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>k(n.id),children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Complete"]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>i(n.id),className:"text-red-600 hover:bg-red-50",children:[e.jsx(ia,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]})})},n.id))})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-gray-600"}),"All Appointments (",s.length,")"]}),e.jsx(_,{children:"Complete history of your appointments"})]}),e.jsx(T,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"No appointments yet"}),e.jsx("p",{className:"text-gray-500",children:"Your appointment history will appear here."})]}):e.jsx("div",{className:"space-y-3",children:s.sort((n,w)=>{const I=new Date(`${n.date}T${n.time}`);return new Date(`${w.date}T${w.time}`).getTime()-I.getTime()}).map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:n.title}),e.jsxs("div",{className:"text-gray-600",children:[P(n.date)," at ",G(n.time)," â€¢ ",n.hospitalName]})]})}),e.jsx(B,{className:b(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]},n.id))})})]})]})}function Gs({userProfile:a,setActiveTab:s}){const[r,g]=p.useState([]),[o,h]=p.useState([]),[l,c]=p.useState([]);p.useEffect(()=>{const f=localStorage.getItem(`appointments_${a.id}`);if(f){const d=JSON.parse(f).filter(S=>new Date(`${S.date}T${S.time}`)>new Date&&S.status!=="cancelled").sort((S,C)=>{const i=new Date(`${S.date}T${S.time}`),k=new Date(`${C.date}T${C.time}`);return i.getTime()-k.getTime()}).slice(0,3);g(d)}const j=localStorage.getItem("donor_availability_slots");if(j){const d=JSON.parse(j).filter(S=>{const C=new Date(S.date),i=new Date;return i.setHours(0,0,0,0),C>=i&&S.status==="available"}).sort((S,C)=>new Date(S.date).getTime()-new Date(C.date).getTime()).slice(0,3);h(d)}const u=localStorage.getItem("donor_recurring_preferences");if(u){const m=JSON.parse(u);c(m.filter(d=>d.isActive))}},[a.id]);const N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(D,{className:"md:col-span-2 lg:col-span-3",children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Welcome back, ",a.fullName.split(" ")[0]]}),e.jsxs(_,{children:["Your blood donations help save lives in ",a.location]})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:"0"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Donations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.bloodType}),e.jsx("div",{className:"text-sm text-gray-500",children:"Blood Type"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.isAvailable?"âœ“":"âœ—"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Available Status"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:new Date(a.createdAt).getFullYear()}),e.jsx("div",{className:"text-sm text-gray-500",children:"Member Since"})]})]})})]}),e.jsxs(D,{className:"md:col-span-2 lg:col-span-3",children:[e.jsxs(R,{children:[e.jsx(E,{children:"Quick Access"}),e.jsx(_,{children:"Access your donation impact and certificates"})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(y,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",onClick:()=>s?.("impact"),children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"text-sm",children:"Donation Impact"})]}),e.jsxs(y,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",onClick:()=>s?.("certificates"),children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Ua,{className:"w-4 h-4 text-yellow-600"})}),e.jsx("span",{className:"text-sm",children:"Certificates"})]}),e.jsxs(y,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",onClick:()=>s?.("availability"),children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Z,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-sm",children:"Set Availability"})]}),e.jsxs(y,{variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",onClick:()=>s?.("requests"),children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-red-600"})}),e.jsx("span",{className:"text-sm",children:"Blood Requests"})]})]})})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Upcoming Appointments"]})}),e.jsxs(T,{className:"space-y-4",children:[r.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No upcoming appointments"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Schedule your next donation appointment"})]}):e.jsx("div",{className:"space-y-3",children:r.map((f,j)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:f.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(f.date).toLocaleDateString()," at ",f.time]}),e.jsx("p",{className:"text-xs text-gray-500",children:f.hospitalName})]}),e.jsx(B,{className:"bg-blue-100 text-blue-800",children:f.status||"Scheduled"})]})},f.id||j))}),e.jsxs(y,{className:"w-full",variant:"outline",onClick:()=>s?.("profile"),children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Manage Appointments"]})]})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Your Availability"]})}),e.jsxs(T,{className:"space-y-4",children:[o.length===0&&l.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No availability set"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set up your donation availability"})]}):e.jsxs("div",{className:"space-y-3",children:[o.map(f=>e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:new Date(f.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),e.jsx("p",{className:"text-sm text-gray-600",children:f.timeSlot.label})]}),e.jsx(B,{className:"bg-green-100 text-green-800 border-green-300",children:"Available"})]})},f.id)),l.slice(0,2).map(f=>e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(us,{className:"w-4 h-4"}),N[f.dayOfWeek],"s"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[f.timeSlots.length," time slot",f.timeSlots.length>1?"s":""]})]}),e.jsx(B,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300",children:f.pattern})]})},f.id))]}),e.jsxs(y,{className:"w-full",variant:"outline",onClick:()=>s?.("availability"),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Manage Availability"]})]})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Blood Requests Matched"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No current matches"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Check the Blood Requests tab to see available requests"})]}),e.jsxs(y,{className:"w-full",variant:"outline",onClick:()=>s?.("requests"),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"View Blood Requests"]})]})]})]})}function Fs(){const[a,s]=p.useState([]),[r,g]=p.useState([]),[o,h]=p.useState({bloodType:"",unitsNeeded:"",location:"",hospitalName:"",urgencyLevel:"critical",additionalNotes:""}),[l,c]=p.useState(!1),[N,f]=p.useState({});p.useEffect(()=>{(()=>{const k=[{id:"emergency-001",bloodType:"O-",unitsNeeded:8,location:"Mumbai, Maharashtra",hospitalName:"Lilavati Hospital",urgencyLevel:"critical",createdAt:new Date(Date.now()-9e5),escalationLevel:0,status:"active",contactAttempts:12,responseCount:3,estimatedTimeLeft:"15 min"},{id:"emergency-002",bloodType:"AB+",unitsNeeded:4,location:"Delhi, NCR",hospitalName:"AIIMS Delhi",urgencyLevel:"urgent",createdAt:new Date(Date.now()-27e5),escalationLevel:1,status:"escalated",contactAttempts:28,responseCount:7}],M=[{id:"partner-001",name:"RedCross Blood Bank Mumbai",location:"Mumbai, Maharashtra",primaryContact:"+91 98765 43210",emergencyContact:"+91 98765 43211",email:"emergency@redcrossmumbai.org",tier:1,availableBloodTypes:["O+","O-","A+","A-","B+","B-","AB+","AB-"],lastResponseTime:"2 min"},{id:"partner-002",name:"Tata Memorial Blood Bank",location:"Mumbai, Maharashtra",primaryContact:"+91 98765 43212",emergencyContact:"+91 98765 43213",email:"blood@tmc.gov.in",tier:1,availableBloodTypes:["O+","O-","A+","B+","AB+"],lastResponseTime:"5 min"},{id:"partner-003",name:"Apollo Hospital Blood Bank",location:"Delhi, NCR",primaryContact:"+91 98765 43214",emergencyContact:"+91 98765 43215",email:"emergency@apollodelhi.com",tier:2,availableBloodTypes:["A+","A-","B+","B-","AB+","AB-"],lastResponseTime:"8 min"}];s(k),g(M)})()},[]),p.useEffect(()=>{const k=setInterval(()=>{s(M=>M.map(t=>{const b=Math.floor((Date.now()-t.createdAt.getTime())/6e4);return t.status==="active"&&b>=30&&t.escalationLevel===0?(A.error(`Emergency request ${t.id} auto-escalated after 30 minutes`),K.broadcastEmergencyAlert({id:t.id,bloodType:t.bloodType,hospitalName:t.hospitalName,unitsNeeded:t.unitsNeeded,location:t.location,urgencyLevel:t.urgencyLevel,escalationLevel:1}),{...t,escalationLevel:1,status:"escalated"}):t.status==="escalated"&&b>=60&&t.escalationLevel===1?(A.error(`Emergency request ${t.id} escalated to Level 2 after 60 minutes`),K.broadcastEmergencyAlert({id:t.id,bloodType:t.bloodType,hospitalName:t.hospitalName,unitsNeeded:t.unitsNeeded,location:t.location,urgencyLevel:t.urgencyLevel,escalationLevel:2}),{...t,escalationLevel:2}):t.escalationLevel===2&&b>=90&&t.escalationLevel===2?(A.error(`Emergency request ${t.id} escalated to Maximum Level after 90 minutes`),K.broadcastEmergencyAlert({id:t.id,bloodType:t.bloodType,hospitalName:t.hospitalName,unitsNeeded:t.unitsNeeded,location:t.location,urgencyLevel:t.urgencyLevel,escalationLevel:3}),{...t,escalationLevel:3}):t}))},6e4);return()=>clearInterval(k)},[]);const j=async()=>{if(!o.bloodType||!o.unitsNeeded||!o.hospitalName){A.error("Please fill in all required fields");return}c(!0);try{const i={id:`emergency-${Date.now()}`,bloodType:o.bloodType,unitsNeeded:parseInt(o.unitsNeeded),location:o.location,hospitalName:o.hospitalName,urgencyLevel:o.urgencyLevel,createdAt:new Date,escalationLevel:0,status:"active",contactAttempts:0,responseCount:0};s(k=>[i,...k]),await u(i),h({bloodType:"",unitsNeeded:"",location:"",hospitalName:"",urgencyLevel:"critical",additionalNotes:""}),A.success("Emergency broadcast sent to all available donors and partners")}catch{A.error("Failed to create emergency request")}finally{c(!1)}},u=async i=>{const k=r.filter(M=>M.availableBloodTypes.includes(i.bloodType)&&M.location.includes(i.location.split(",")[0]));k.forEach(M=>{console.log(`ðŸš¨ Emergency broadcast to ${M.name}: ${i.bloodType} needed`)}),console.log(`ðŸš¨ Broadcasting to all ${i.bloodType} donors in ${i.location}`),await K.broadcastEmergencyAlert({id:i.id,bloodType:i.bloodType,hospitalName:i.hospitalName,unitsNeeded:i.unitsNeeded,location:i.location,urgencyLevel:i.urgencyLevel,escalationLevel:i.escalationLevel}),s(M=>M.map(t=>t.id===i.id?{...t,contactAttempts:k.length+150}:t))},m=async i=>{a.find(M=>M.id===i)&&s(M=>M.map(t=>{if(t.id===i){const b=Math.min(t.escalationLevel+1,3);return b===1?A.warning("Escalating to secondary hospital network"):b===2?A.error("Escalating to emergency backup network"):b===3&&A.error("Maximum escalation: Contacting government emergency services"),K.broadcastEmergencyAlert({id:t.id,bloodType:t.bloodType,hospitalName:t.hospitalName,unitsNeeded:t.unitsNeeded,location:t.location,urgencyLevel:t.urgencyLevel,escalationLevel:b}),{...t,escalationLevel:b,status:"escalated",contactAttempts:t.contactAttempts+b*50}}return t}))},d=i=>{s(k=>k.map(M=>M.id===i?{...M,status:"fulfilled"}:M)),A.success("Emergency request marked as fulfilled")},S=i=>{switch(i){case 0:return"bg-yellow-100 text-yellow-800";case 1:return"bg-orange-100 text-orange-800";case 2:return"bg-red-100 text-red-800";case 3:return"bg-red-600 text-white";default:return"bg-gray-100 text-gray-800"}},C=i=>{switch(i){case"critical":return"text-red-600";case"urgent":return"text-orange-600";case"high":return"text-yellow-600";default:return"text-gray-600"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-6 h-6 text-red-600"}),e.jsx("h1",{children:"Emergency Broadcast System"})]}),e.jsxs(B,{variant:"destructive",className:"animate-pulse",children:[a.filter(i=>i.status==="active").length," Active Emergency"]})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Create Emergency Broadcast"]}),e.jsx(_,{children:"Send immediate alerts to all donors and hospital partners for critical blood shortages"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Blood Type Required *"}),e.jsxs(H,{value:o.bloodType,onValueChange:i=>h(k=>({...k,bloodType:i})),children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select blood type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"A+",children:"A+"}),e.jsx(x,{value:"A-",children:"A-"}),e.jsx(x,{value:"B+",children:"B+"}),e.jsx(x,{value:"B-",children:"B-"}),e.jsx(x,{value:"AB+",children:"AB+"}),e.jsx(x,{value:"AB-",children:"AB-"}),e.jsx(x,{value:"O+",children:"O+"}),e.jsx(x,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Units Needed *"}),e.jsx(L,{type:"number",placeholder:"Number of units",value:o.unitsNeeded,onChange:i=>h(k=>({...k,unitsNeeded:i.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Hospital Name *"}),e.jsx(L,{placeholder:"Hospital or medical facility name",value:o.hospitalName,onChange:i=>h(k=>({...k,hospitalName:i.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Location"}),e.jsx(L,{placeholder:"City, State",value:o.location,onChange:i=>h(k=>({...k,location:i.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Urgency Level"}),e.jsxs(H,{value:o.urgencyLevel,onValueChange:i=>h(k=>({...k,urgencyLevel:i})),children:[e.jsx(q,{children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"critical",children:"Critical (Life-threatening)"}),e.jsx(x,{value:"urgent",children:"Urgent (24 hours)"}),e.jsx(x,{value:"high",children:"High Priority"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Additional Notes"}),e.jsx(re,{placeholder:"Any additional information about the emergency...",value:o.additionalNotes,onChange:i=>h(k=>({...k,additionalNotes:i.target.value})),rows:3})]}),e.jsx(y,{onClick:j,disabled:l,className:"w-full bg-red-600 hover:bg-red-700",children:l?"Broadcasting...":"Send Emergency Broadcast"})]})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"}),"Active Emergency Requests",e.jsx(B,{className:"ml-auto",children:a.length})]})}),e.jsx(T,{children:a.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No active emergency requests"}):e.jsx("div",{className:"space-y-4",children:a.map(i=>e.jsx("div",{className:`p-4 border rounded-lg ${i.status==="fulfilled"?"bg-green-50":"bg-red-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(B,{variant:"secondary",className:"bg-red-100 text-red-800",children:i.bloodType}),e.jsxs(B,{className:S(i.escalationLevel),children:["Escalation Level ",i.escalationLevel]}),e.jsx("span",{className:`capitalize ${C(i.urgencyLevel)}`,children:i.urgencyLevel}),i.estimatedTimeLeft&&e.jsxs(B,{variant:"destructive",className:"animate-pulse",children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),i.estimatedTimeLeft]})]}),e.jsx("h3",{className:"font-semibold",children:i.hospitalName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.location}),e.jsxs("p",{className:"text-sm",children:[e.jsxs("strong",{children:[i.unitsNeeded," units needed"]})," â€¢ Created ",Math.floor((Date.now()-i.createdAt.getTime())/(1e3*60))," minutes ago"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),i.contactAttempts," contacts"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-4 h-4"}),i.responseCount," responses"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[i.status!=="fulfilled"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{size:"sm",variant:"outline",onClick:()=>m(i.id),disabled:i.escalationLevel>=3,children:"Escalate"}),e.jsxs(y,{size:"sm",onClick:()=>d(i.id),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),"Fulfilled"]})]}),i.status==="fulfilled"&&e.jsx(B,{className:"bg-green-100 text-green-800",children:"âœ“ Fulfilled"})]})]})},i.id))})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Hospital Partnership Network"]}),e.jsx(_,{children:"Emergency contact chain for coordinated blood supply response"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(i=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:i.name}),e.jsxs(B,{variant:i.tier===1?"destructive":i.tier===2?"default":"secondary",children:["Tier ",i.tier]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i.location}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:i.primaryContact})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:i.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsxs("span",{children:["Responds in ",i.lastResponseTime]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Available Blood Types:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.availableBloodTypes.map(k=>e.jsx(B,{variant:"outline",className:"text-xs",children:k},k))})]})]},i.id))})})]}),e.jsxs(Ae,{children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs(Se,{children:[e.jsx("strong",{children:"Emergency Escalation Protocol:"})," Level 0 (Immediate broadcast) â†’ Level 1 (30 min: Secondary network) â†’ Level 2 (60 min: Emergency backup) â†’ Level 3 (90 min: Government services). All escalations are automatic but can be manually triggered for faster response."]})]})]})}function Us(){const[a,s]=p.useState([]),[r,g]=p.useState([]),[o,h]=p.useState([]);p.useEffect(()=>{(()=>{const S=[{id:"rule-001",name:"Level 1 - Local Network",description:"Contact all donors and local blood banks in the immediate area",triggerAfterMinutes:0,escalationLevel:1,actions:["SMS to all registered donors","Call local blood banks","Mobile app push notifications"],contactGroups:["local_donors","local_blood_banks"],isActive:!0},{id:"rule-002",name:"Level 2 - Regional Network",description:"Expand to regional hospitals and blood banks within 50km radius",triggerAfterMinutes:30,escalationLevel:2,actions:["Regional hospital network alert","Blood bank partnership network","Social media emergency post"],contactGroups:["regional_hospitals","partner_blood_banks","emergency_volunteers"],isActive:!0},{id:"rule-003",name:"Level 3 - State Network",description:"Contact state-level blood transfusion services and emergency services",triggerAfterMinutes:60,escalationLevel:3,actions:["State Blood Transfusion Council","Emergency services coordination","Media alert"],contactGroups:["state_officials","emergency_services","media_contacts"],isActive:!0},{id:"rule-004",name:"Level 4 - National Emergency",description:"Activate national emergency protocols and government intervention",triggerAfterMinutes:90,escalationLevel:4,actions:["National Blood Transfusion Council","Health Ministry notification","Inter-state coordination"],contactGroups:["national_officials","health_ministry","interstate_network"],isActive:!0}],C=[{id:"contact-001",name:"Dr. Rajesh Kumar",role:"Emergency Blood Bank Coordinator",phone:"+91 98765 43210",email:"rajesh.kumar@redcross.org",group:"local_blood_banks",priority:1,responseRate:95},{id:"contact-002",name:"Mumbai Blood Bank Network",role:"Regional Coordinator",phone:"+91 98765 43211",email:"emergency@mumbaibloodbank.org",group:"regional_hospitals",priority:1,responseRate:88},{id:"contact-003",name:"Maharashtra State Blood Services",role:"State Coordinator",phone:"+91 98765 43212",email:"emergency@maharashtrablood.gov.in",group:"state_officials",priority:1,responseRate:92},{id:"contact-004",name:"National Blood Emergency Hotline",role:"National Emergency Response",phone:"1075",email:"emergency@nationalblood.gov.in",group:"national_officials",priority:1,responseRate:98}],i=[{id:"escalation-001",requestId:"emergency-001",bloodType:"O-",hospital:"Lilavati Hospital",startTime:new Date(Date.now()-1500*1e3),currentLevel:1,nextEscalationTime:new Date(Date.now()+300*1e3),contactsReached:156,responsesReceived:23,status:"in_progress"},{id:"escalation-002",requestId:"emergency-002",bloodType:"AB+",hospital:"AIIMS Delhi",startTime:new Date(Date.now()-3900*1e3),currentLevel:3,nextEscalationTime:new Date(Date.now()+1500*1e3),contactsReached:342,responsesReceived:78,status:"in_progress"}];s(S),g(C),h(i)})()},[]),p.useEffect(()=>{const S=setInterval(()=>{h(C=>C.map(i=>{if(i.status==="in_progress"&&new Date>=i.nextEscalationTime){const k=i.currentLevel+1;if(a.find(t=>t.escalationLevel===k))return A.error(`Escalating ${i.bloodType} request to Level ${k}`),K.broadcastEmergencyAlert({id:i.requestId,bloodType:i.bloodType,hospitalName:i.hospital,unitsNeeded:1,location:"Emergency Location",urgencyLevel:"critical",escalationLevel:k}),{...i,currentLevel:k,nextEscalationTime:new Date(Date.now()+18e5),contactsReached:i.contactsReached+50}}return i}))},3e4);return()=>clearInterval(S)},[a]);const l=d=>{h(S=>S.map(C=>{if(C.id===d&&C.currentLevel<4){const i=C.currentLevel+1;return A.warning(`Manually escalating to Level ${i}`),K.broadcastEmergencyAlert({id:C.requestId,bloodType:C.bloodType,hospitalName:C.hospital,unitsNeeded:1,location:"Emergency Location",urgencyLevel:"critical",escalationLevel:i}),{...C,currentLevel:i,nextEscalationTime:new Date(Date.now()+1800*1e3),contactsReached:C.contactsReached+50}}return C}))},c=d=>{h(S=>S.map(C=>C.id===d?(A.info("Escalation paused"),{...C,status:"pending"}):C))},N=d=>{h(S=>S.map(C=>C.id===d?(A.info("Escalation resumed"),{...C,status:"in_progress"}):C))},f=d=>{h(S=>S.map(C=>C.id===d?(A.success("Emergency request fulfilled - escalation completed"),{...C,status:"completed"}):C))},j=d=>{const S=Math.max(0,Math.floor((d.getTime()-Date.now())/6e4));return S>0?`${S} min`:"Now"},u=d=>{switch(d){case 1:return"bg-yellow-100 text-yellow-800";case 2:return"bg-orange-100 text-orange-800";case 3:return"bg-red-100 text-red-800";case 4:return"bg-red-600 text-white";default:return"bg-gray-100 text-gray-800"}},m=d=>{const i=Math.floor((Date.now()-d.startTime.getTime())/6e4)%30;return Math.min(i/30*100,100)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6 text-orange-600"}),e.jsx("h1",{children:"Emergency Escalation Manager"})]}),e.jsxs(B,{variant:"outline",children:[o.filter(d=>d.status==="in_progress").length," Active Escalations"]})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Active Escalations"]}),e.jsx(_,{children:"Real-time monitoring of emergency request escalations with automated timers"})]}),e.jsx(T,{children:o.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No active escalations"}):e.jsx("div",{className:"space-y-4",children:o.map(d=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(B,{variant:"secondary",className:"bg-red-100 text-red-800",children:d.bloodType}),e.jsxs(B,{className:u(d.currentLevel),children:["Level ",d.currentLevel]}),e.jsx(B,{variant:d.status==="completed"?"default":"destructive",children:d.status.replace("_"," ").toUpperCase()})]}),e.jsx("h3",{className:"font-semibold",children:d.hospital}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Started ",Math.floor((Date.now()-d.startTime.getTime())/(1e3*60))," minutes ago"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"w-4 h-4"}),d.contactsReached," contacted"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-4 h-4"}),d.responsesReceived," responses"]}),d.status==="in_progress"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-4 h-4"}),"Next in ",j(d.nextEscalationTime)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[d.status==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>l(d.id),disabled:d.currentLevel>=4,children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Escalate Now"]}),e.jsx(y,{size:"sm",variant:"secondary",onClick:()=>c(d.id),children:"Pause"})]}),d.status==="pending"&&e.jsx(y,{size:"sm",onClick:()=>N(d.id),children:"Resume"}),d.status!=="completed"&&e.jsxs(y,{size:"sm",onClick:()=>f(d.id),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),"Complete"]})]})]}),d.status==="in_progress"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress to next level"}),e.jsxs("span",{children:[Math.round(m(d)),"%"]})]}),e.jsx(Va,{value:m(d),className:"h-2"})]})]},d.id))})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Escalation Rules & Timeline"]}),e.jsx(_,{children:"Automated escalation protocol with defined triggers and actions"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:a.map((d,S)=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(B,{className:u(d.escalationLevel),children:d.name}),e.jsxs(B,{variant:"outline",children:["Triggers after ",d.triggerAfterMinutes," minutes"]}),e.jsx(B,{variant:d.isActive?"default":"secondary",children:d.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:d.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Actions:"}),e.jsx("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:d.actions.map((C,i)=>e.jsx("li",{children:C},i))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1",children:"Contact Groups:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.contactGroups.map(C=>e.jsx(B,{variant:"outline",className:"text-xs",children:C.replace("_"," ")},C))})]})]})]})})},d.id))})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Emergency Contact Directory"]}),e.jsx(_,{children:"Key contacts for each escalation level with response rates"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(d=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:d.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.role})]}),e.jsxs(B,{variant:"outline",className:"text-xs",children:[d.responseRate,"% response rate"]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:d.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:d.email})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(B,{variant:"secondary",className:"text-xs",children:d.group.replace("_"," ")})})]},d.id))})})]}),e.jsxs(Ae,{children:[e.jsx(J,{className:"h-4 w-4"}),e.jsxs(Se,{children:[e.jsx("strong",{children:"Escalation System Status:"})," All automated timers are active. Emergency requests will automatically escalate every 30 minutes unless manually controlled. Response times are monitored in real-time for system optimization."]})]})]})}var Re="Dialog",[pa]=aa(Re),[Vs,ne]=pa(Re),ga=a=>{const{__scopeDialog:s,children:r,open:g,defaultOpen:o,onOpenChange:h,modal:l=!0}=a,c=p.useRef(null),N=p.useRef(null),[f,j]=ea({prop:g,defaultProp:o??!1,onChange:h,caller:Re});return e.jsx(Vs,{scope:s,triggerRef:c,contentRef:N,contentId:Ee(),titleId:Ee(),descriptionId:Ee(),open:f,onOpenChange:j,onOpenToggle:p.useCallback(()=>j(u=>!u),[j]),modal:l,children:r})};ga.displayName=Re;var ja="DialogTrigger",ya=p.forwardRef((a,s)=>{const{__scopeDialog:r,...g}=a,o=ne(ja,r),h=fe(s,o.triggerRef);return e.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ke(o.open),...g,ref:h,onClick:ge(a.onClick,o.onOpenToggle)})});ya.displayName=ja;var ze="DialogPortal",[Js,Na]=pa(ze,{forceMount:void 0}),fa=a=>{const{__scopeDialog:s,forceMount:r,children:g,container:o}=a,h=ne(ze,s);return e.jsx(Js,{scope:s,forceMount:r,children:p.Children.map(g,l=>e.jsx(He,{present:r||h.open,children:e.jsx(Ia,{asChild:!0,container:o,children:l})}))})};fa.displayName=ze;var Be="DialogOverlay",va=p.forwardRef((a,s)=>{const r=Na(Be,a.__scopeDialog),{forceMount:g=r.forceMount,...o}=a,h=ne(Be,a.__scopeDialog);return h.modal?e.jsx(He,{present:g||h.open,children:e.jsx(Ys,{...o,ref:s})}):null});va.displayName=Be;var Ws=Ra("DialogOverlay.RemoveScroll"),Ys=p.forwardRef((a,s)=>{const{__scopeDialog:r,...g}=a,o=ne(Be,r);return e.jsx(Ha,{as:Ws,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(pe.div,{"data-state":Ke(o.open),...g,ref:s,style:{pointerEvents:"auto",...g.style}})})}),xe="DialogContent",ba=p.forwardRef((a,s)=>{const r=Na(xe,a.__scopeDialog),{forceMount:g=r.forceMount,...o}=a,h=ne(xe,a.__scopeDialog);return e.jsx(He,{present:g||h.open,children:h.modal?e.jsx(Xs,{...o,ref:s}):e.jsx(Zs,{...o,ref:s})})});ba.displayName=xe;var Xs=p.forwardRef((a,s)=>{const r=ne(xe,a.__scopeDialog),g=p.useRef(null),o=fe(s,r.contentRef,g);return p.useEffect(()=>{const h=g.current;if(h)return $a(h)},[]),e.jsx(wa,{...a,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(a.onCloseAutoFocus,h=>{h.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:ge(a.onPointerDownOutside,h=>{const l=h.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&h.preventDefault()}),onFocusOutside:ge(a.onFocusOutside,h=>h.preventDefault())})}),Zs=p.forwardRef((a,s)=>{const r=ne(xe,a.__scopeDialog),g=p.useRef(!1),o=p.useRef(!1);return e.jsx(wa,{...a,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:h=>{a.onCloseAutoFocus?.(h),h.defaultPrevented||(g.current||r.triggerRef.current?.focus(),h.preventDefault()),g.current=!1,o.current=!1},onInteractOutside:h=>{a.onInteractOutside?.(h),h.defaultPrevented||(g.current=!0,h.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=h.target;r.triggerRef.current?.contains(l)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&o.current&&h.preventDefault()}})}),wa=p.forwardRef((a,s)=>{const{__scopeDialog:r,trapFocus:g,onOpenAutoFocus:o,onCloseAutoFocus:h,...l}=a,c=ne(xe,r),N=p.useRef(null),f=fe(s,N);return qa(),e.jsxs(e.Fragment,{children:[e.jsx(za,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:o,onUnmountAutoFocus:h,children:e.jsx(Oa,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Ke(c.open),...l,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Qs,{titleId:c.titleId}),e.jsx(at,{contentRef:N,descriptionId:c.descriptionId})]})]})}),Oe="DialogTitle",Ca=p.forwardRef((a,s)=>{const{__scopeDialog:r,...g}=a,o=ne(Oe,r);return e.jsx(pe.h2,{id:o.titleId,...g,ref:s})});Ca.displayName=Oe;var ka="DialogDescription",Aa=p.forwardRef((a,s)=>{const{__scopeDialog:r,...g}=a,o=ne(ka,r);return e.jsx(pe.p,{id:o.descriptionId,...g,ref:s})});Aa.displayName=ka;var Sa="DialogClose",Da=p.forwardRef((a,s)=>{const{__scopeDialog:r,...g}=a,o=ne(Sa,r);return e.jsx(pe.button,{type:"button",...g,ref:s,onClick:ge(a.onClick,()=>o.onOpenChange(!1))})});Da.displayName=Sa;function Ke(a){return a?"open":"closed"}var Ta="DialogTitleWarning",[Ut,Ba]=Ka(Ta,{contentName:xe,titleName:Oe,docsSlug:"dialog"}),Qs=({titleId:a})=>{const s=Ba(Ta),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return p.useEffect(()=>{a&&(document.getElementById(a)||console.error(r))},[r,a]),null},et="DialogDescriptionWarning",at=({contentRef:a,descriptionId:s})=>{const g=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ba(et).contentName}}.`;return p.useEffect(()=>{const o=a.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(g))},[g,a,s]),null},st=ga,tt=ya,nt=fa,it=va,rt=ba,lt=Ca,ot=Aa,ct=Da;function dt({...a}){return e.jsx(st,{"data-slot":"dialog",...a})}function mt({...a}){return e.jsx(tt,{"data-slot":"dialog-trigger",...a})}function ht({...a}){return e.jsx(nt,{"data-slot":"dialog-portal",...a})}function ut({className:a,...s}){return e.jsx(it,{"data-slot":"dialog-overlay",className:le("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...s})}function xt({className:a,children:s,...r}){return e.jsxs(ht,{"data-slot":"dialog-portal",children:[e.jsx(ut,{}),e.jsxs(rt,{"data-slot":"dialog-content",className:le("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r,children:[s,e.jsxs(ct,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ra,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function pt({className:a,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:le("flex flex-col gap-2 text-center sm:text-left",a),...s})}function gt({className:a,...s}){return e.jsx(lt,{"data-slot":"dialog-title",className:le("text-lg leading-none font-semibold",a),...s})}function jt({className:a,...s}){return e.jsx(ot,{"data-slot":"dialog-description",className:le("text-muted-foreground text-sm",a),...s})}function yt(){const[a,s]=p.useState([]),[r,g]=p.useState([]),[o,h]=p.useState("all"),[l,c]=p.useState("all"),[N,f]=p.useState(!1),[j,u]=p.useState({name:"",type:"hospital",city:"",state:"",address:"",primaryContact:"",emergencyContact:"",email:"",tier:1,bloodBankCapacity:"",emergencyResponse:!0});p.useEffect(()=>{(()=>{const b=[{id:"partner-001",name:"Tata Memorial Hospital",type:"hospital",location:{city:"Mumbai",state:"Maharashtra",address:"Dr. E Borges Road, Parel, Mumbai",coordinates:{lat:19.0176,lng:72.8562}},contacts:{primaryContact:"+91 22 2417 7000",emergencyContact:"+91 22 2417 7001",email:"emergency@tmc.gov.in",alternatePhone:"+91 22 2417 7002"},tier:1,capacity:{totalBeds:629,bloodBankCapacity:500,averageMonthlyDonations:2e3},capabilities:{bloodTypes:["O+","O-","A+","A-","B+","B-","AB+","AB-"],emergencyResponse:!0,mobileBanks:!0,plasmapheresis:!0,pediatricBlood:!0},performance:{responseTime:"2-5 min",fulfillmentRate:94,lastResponseTime:new Date(Date.now()-3e5),collaborationScore:98},availability:{status:"active",lastUpdated:new Date(Date.now()-18e5)},isActive:!0},{id:"partner-002",name:"King Edward Memorial Hospital",type:"hospital",location:{city:"Mumbai",state:"Maharashtra",address:"Acharya Donde Marg, Parel, Mumbai",coordinates:{lat:19.0176,lng:72.8422}},contacts:{primaryContact:"+91 22 2413 6051",emergencyContact:"+91 22 2413 6052",email:"emergency@kem.edu"},tier:1,capacity:{totalBeds:1800,bloodBankCapacity:800,averageMonthlyDonations:3500},capabilities:{bloodTypes:["O+","O-","A+","A-","B+","B-","AB+","AB-"],emergencyResponse:!0,mobileBanks:!0,plasmapheresis:!1,pediatricBlood:!0},performance:{responseTime:"3-7 min",fulfillmentRate:91,lastResponseTime:new Date(Date.now()-72e4),collaborationScore:95},availability:{status:"active",lastUpdated:new Date(Date.now()-27e5)},isActive:!0},{id:"partner-003",name:"AIIMS Delhi",type:"hospital",location:{city:"New Delhi",state:"Delhi",address:"Ansari Nagar, New Delhi",coordinates:{lat:28.5672,lng:77.21}},contacts:{primaryContact:"+91 11 2658 8500",emergencyContact:"+91 11 2658 8700",email:"emergency@aiims.edu"},tier:1,capacity:{totalBeds:2478,bloodBankCapacity:1e3,averageMonthlyDonations:4500},capabilities:{bloodTypes:["O+","O-","A+","A-","B+","B-","AB+","AB-"],emergencyResponse:!0,mobileBanks:!0,plasmapheresis:!0,pediatricBlood:!0},performance:{responseTime:"1-3 min",fulfillmentRate:97,lastResponseTime:new Date(Date.now()-12e4),collaborationScore:99},availability:{status:"active",lastUpdated:new Date(Date.now()-9e5)},isActive:!0},{id:"partner-004",name:"Indian Red Cross Society Blood Bank",type:"blood_bank",location:{city:"Bangalore",state:"Karnataka",address:"Red Cross Bhavan, Race Course Road, Bangalore",coordinates:{lat:12.9716,lng:77.5946}},contacts:{primaryContact:"+91 80 2226 4424",emergencyContact:"+91 80 2226 4425",email:"bloodbank@redcrossbangalore.org"},tier:2,capacity:{bloodBankCapacity:600,averageMonthlyDonations:2800},capabilities:{bloodTypes:["O+","O-","A+","A-","B+","B-","AB+","AB-"],emergencyResponse:!0,mobileBanks:!0,plasmapheresis:!1,pediatricBlood:!1},performance:{responseTime:"5-10 min",fulfillmentRate:87,lastResponseTime:new Date(Date.now()-12e5),collaborationScore:88},availability:{status:"active",lastUpdated:new Date(Date.now()-36e5)},isActive:!0},{id:"partner-005",name:"Voluntary Blood Donors Association",type:"ngo",location:{city:"Chennai",state:"Tamil Nadu",address:"Anna Nagar, Chennai",coordinates:{lat:13.0827,lng:80.2707}},contacts:{primaryContact:"+91 44 2628 4567",emergencyContact:"+91 44 2628 4568",email:"emergency@vbdachennai.org"},tier:3,capacity:{bloodBankCapacity:200,averageMonthlyDonations:800},capabilities:{bloodTypes:["O+","A+","B+","AB+"],emergencyResponse:!0,mobileBanks:!1,plasmapheresis:!1,pediatricBlood:!1},performance:{responseTime:"10-15 min",fulfillmentRate:78,lastResponseTime:new Date(Date.now()-21e5),collaborationScore:82},availability:{status:"limited",lastUpdated:new Date(Date.now()-54e5),specialNotes:"Limited capacity due to ongoing blood drive"},isActive:!0}],P=[{id:"request-001",emergencyType:"blood_shortage",bloodType:"O-",unitsNeeded:12,urgencyLevel:"critical",location:"Mumbai, Maharashtra",requestingHospital:"Lilavati Hospital",contactedPartners:["partner-001","partner-002"],responses:[{partnerId:"partner-001",response:"accepted",timestamp:new Date(Date.now()-600*1e3),notes:"Can provide 8 units immediately"},{partnerId:"partner-002",response:"pending",timestamp:new Date(Date.now()-300*1e3)}],createdAt:new Date(Date.now()-900*1e3),status:"in_progress"}];s(b),g(P)})()},[]);const m=()=>{if(!j.name||!j.primaryContact||!j.email){A.error("Please fill in all required fields");return}const t={id:`partner-${Date.now()}`,name:j.name,type:j.type,location:{city:j.city,state:j.state,address:j.address,coordinates:{lat:0,lng:0}},contacts:{primaryContact:j.primaryContact,emergencyContact:j.emergencyContact,email:j.email},tier:j.tier,capacity:{bloodBankCapacity:parseInt(j.bloodBankCapacity)||0,averageMonthlyDonations:0},capabilities:{bloodTypes:["O+","A+","B+","AB+"],emergencyResponse:j.emergencyResponse,mobileBanks:!1,plasmapheresis:!1,pediatricBlood:!1},performance:{responseTime:"Not tracked",fulfillmentRate:0,lastResponseTime:new Date,collaborationScore:0},availability:{status:"active",lastUpdated:new Date},isActive:!0};s(b=>[t,...b]),f(!1),u({name:"",type:"hospital",city:"",state:"",address:"",primaryContact:"",emergencyContact:"",email:"",tier:1,bloodBankCapacity:"",emergencyResponse:!0}),A.success("New hospital partner added successfully")},d=t=>{const b=a.find(P=>P.id===t);b&&A.info(`Emergency contact initiated with ${b.name}`)},S=a.filter(t=>!(o!=="all"&&t.tier!==o||l!=="all"&&t.location.state!==l)),C=t=>{switch(t){case"hospital":return"ðŸ¥";case"blood_bank":return"ðŸ©¸";case"clinic":return"ðŸª";case"government":return"ðŸ›ï¸";case"ngo":return"ðŸ¤";default:return"ðŸ¥"}},i=t=>{switch(t){case 1:return"bg-red-100 text-red-800";case 2:return"bg-orange-100 text-orange-800";case 3:return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},k=t=>{switch(t){case"active":return"bg-green-100 text-green-800";case"limited":return"bg-yellow-100 text-yellow-800";case"unavailable":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=[...new Set(a.map(t=>t.location.state))];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-6 h-6 text-blue-600"}),e.jsx("h1",{children:"Hospital Partnership Chain"})]}),e.jsxs(B,{variant:"outline",children:[a.filter(t=>t.isActive).length," Active Partners"]})]}),e.jsxs(dt,{open:N,onOpenChange:f,children:[e.jsx(mt,{asChild:!0,children:e.jsxs(y,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Add Partner"]})}),e.jsxs(xt,{className:"max-w-2xl",children:[e.jsxs(pt,{children:[e.jsx(gt,{children:"Add New Hospital Partner"}),e.jsx(jt,{children:"Add a new hospital or blood bank to the emergency partnership network"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Name *"}),e.jsx(L,{value:j.name,onChange:t=>u(b=>({...b,name:t.target.value})),placeholder:"Hospital or organization name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Type"}),e.jsxs(H,{value:j.type,onValueChange:t=>u(b=>({...b,type:t})),children:[e.jsx(q,{children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"hospital",children:"Hospital"}),e.jsx(x,{value:"blood_bank",children:"Blood Bank"}),e.jsx(x,{value:"clinic",children:"Clinic"}),e.jsx(x,{value:"government",children:"Government"}),e.jsx(x,{value:"ngo",children:"NGO"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"City"}),e.jsx(L,{value:j.city,onChange:t=>u(b=>({...b,city:t.target.value})),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"State"}),e.jsx(L,{value:j.state,onChange:t=>u(b=>({...b,state:t.target.value})),placeholder:"State"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Address"}),e.jsx(re,{value:j.address,onChange:t=>u(b=>({...b,address:t.target.value})),placeholder:"Full address",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Primary Contact *"}),e.jsx(L,{value:j.primaryContact,onChange:t=>u(b=>({...b,primaryContact:t.target.value})),placeholder:"+91 XXXXX XXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Emergency Contact"}),e.jsx(L,{value:j.emergencyContact,onChange:t=>u(b=>({...b,emergencyContact:t.target.value})),placeholder:"+91 XXXXX XXXXX"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Email *"}),e.jsx(L,{type:"email",value:j.email,onChange:t=>u(b=>({...b,email:t.target.value})),placeholder:"emergency@hospital.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Partnership Tier"}),e.jsxs(H,{value:j.tier.toString(),onValueChange:t=>u(b=>({...b,tier:parseInt(t)})),children:[e.jsx(q,{children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"1",children:"Tier 1 (Primary)"}),e.jsx(x,{value:"2",children:"Tier 2 (Secondary)"}),e.jsx(x,{value:"3",children:"Tier 3 (Emergency Backup)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Blood Bank Capacity"}),e.jsx(L,{type:"number",value:j.bloodBankCapacity,onChange:t=>u(b=>({...b,bloodBankCapacity:t.target.value})),placeholder:"Number of units"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(y,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsx(y,{onClick:m,children:"Add Partner"})]})]})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm",children:"Filter by Tier"}),e.jsxs(H,{value:o.toString(),onValueChange:t=>h(t==="all"?"all":parseInt(t)),children:[e.jsx(q,{className:"w-48",children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"all",children:"All Tiers"}),e.jsx(x,{value:"1",children:"Tier 1 (Primary)"}),e.jsx(x,{value:"2",children:"Tier 2 (Secondary)"}),e.jsx(x,{value:"3",children:"Tier 3 (Emergency)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm",children:"Filter by State"}),e.jsxs(H,{value:l,onValueChange:c,children:[e.jsx(q,{className:"w-48",children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"all",children:"All States"}),M.map(t=>e.jsx(x,{value:t,children:t},t))]})]})]})]})})}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Partnership Network",e.jsxs(B,{className:"ml-auto",children:[S.length," Partners"]})]}),e.jsx(_,{children:"Emergency contact chain for coordinated blood supply response"})]}),e.jsx(T,{children:S.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No partners match the selected filters"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(t=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:C(t.type)}),e.jsx("h3",{className:"font-semibold text-sm leading-tight",children:t.name})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.location.city,", ",t.location.state]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(B,{className:i(t.tier),size:"sm",children:["Tier ",t.tier]}),e.jsx(B,{className:k(t.availability.status),size:"sm",children:t.availability.status})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Response Time:"}),e.jsx("span",{className:"font-medium",children:t.performance.responseTime})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Fulfillment Rate:"}),e.jsxs("span",{className:"font-medium",children:[t.performance.fulfillmentRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Collaboration Score:"}),e.jsxs("span",{className:"font-medium",children:[t.performance.collaborationScore,"/100"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Capabilities:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.capabilities.emergencyResponse&&e.jsx(B,{variant:"outline",size:"sm",children:"24/7 Emergency"}),t.capabilities.mobileBanks&&e.jsx(B,{variant:"outline",size:"sm",children:"Mobile Banks"}),t.capabilities.plasmapheresis&&e.jsx(B,{variant:"outline",size:"sm",children:"Plasmapheresis"}),t.capabilities.pediatricBlood&&e.jsx(B,{variant:"outline",size:"sm",children:"Pediatric"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Available Blood Types:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.capabilities.bloodTypes.map(b=>e.jsx(B,{variant:"secondary",size:"sm",children:b},b))})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-3 h-3"}),e.jsx("span",{children:t.contacts.primaryContact})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{children:t.contacts.emergencyContact})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate",children:t.contacts.email})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Blood Bank Capacity:"}),e.jsxs("span",{className:"font-medium",children:[t.capacity.bloodBankCapacity," units"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monthly Donations:"}),e.jsx("span",{className:"font-medium",children:t.capacity.averageMonthlyDonations})]})]}),t.availability.specialNotes&&e.jsxs(Ae,{className:"p-2",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx(Se,{className:"text-xs",children:t.availability.specialNotes})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(y,{size:"sm",onClick:()=>d(t.id),className:"flex-1 bg-red-600 hover:bg-red-700",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"Emergency Contact"]})})]},t.id))})})]}),r.length>0&&e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Active Partnership Requests"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(B,{variant:"destructive",children:t.bloodType}),e.jsx(B,{variant:"outline",children:t.urgencyLevel}),e.jsxs("span",{className:"text-sm font-medium",children:[t.unitsNeeded," units needed"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested by ",t.requestingHospital," in ",t.location]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.floor((Date.now()-t.createdAt.getTime())/(1e3*60))," minutes ago"]})]}),e.jsx(B,{className:t.status==="fulfilled"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:t.status.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Partner Responses:"}),t.responses.map(b=>{const P=a.find(G=>G.id===b.partnerId);return e.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:P?.name||"Unknown Partner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{variant:b.response==="accepted"?"default":b.response==="declined"?"destructive":"secondary",size:"sm",children:b.response}),b.response==="accepted"&&e.jsx(ie,{className:"w-4 h-4 text-green-600"})]})]},b.partnerId)})]})]},t.id))})})]}),e.jsxs(Ae,{children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsxs(Se,{children:[e.jsx("strong",{children:"Partnership Network Status:"})," ",a.filter(t=>t.isActive).length," active partners across ",M.length," states. Emergency contact protocols are automated with real-time availability tracking. Tier 1 partners are contacted first, followed by automatic escalation to lower tiers if needed."]})]})]})}function Nt(){const[a,s]=p.useState(!1),r=async()=>{s(!0);try{await K.broadcastEmergencyAlert({id:"test-emergency-001",bloodType:"O-",hospitalName:"Test Hospital",unitsNeeded:5,location:"Test City, Test State",urgencyLevel:"critical",escalationLevel:0}),A.success("Emergency notification test completed!")}catch(o){A.error("Emergency notification test failed"),console.error("Test error:",o)}finally{s(!1)}},g=async()=>{s(!0);try{await K.broadcastEmergencyAlert({id:"test-emergency-002",bloodType:"AB+",hospitalName:"Test Hospital 2",unitsNeeded:3,location:"Test City 2, Test State",urgencyLevel:"critical",escalationLevel:2}),A.success("Escalated emergency notification test completed!")}catch(o){A.error("Escalated emergency notification test failed"),console.error("Test error:",o)}finally{s(!1)}};return e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-red-600"}),"Emergency Notification Test"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{onClick:r,disabled:a,variant:"destructive",children:"Test Emergency Broadcast"}),e.jsx(y,{onClick:g,disabled:a,variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:"Test Escalated Emergency"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click these buttons to test emergency notification system integration. Make sure your browser allows notifications for the best experience."})]})]})}function ft(){const[a,s]=p.useState("broadcast");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-6 h-6 text-red-600"}),e.jsx("h1",{children:"Emergency Management Center"})]})}),e.jsxs(Ie,{value:a,onValueChange:s,className:"w-full",children:[e.jsxs($e,{className:"grid w-full grid-cols-4 mb-8",children:[e.jsxs(Y,{value:"broadcast",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Emergency Broadcast"})]}),e.jsxs(Y,{value:"escalation",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Escalation Manager"})]}),e.jsxs(Y,{value:"partnerships",className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Hospital Network"})]}),e.jsxs(Y,{value:"test",className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Test System"})]})]}),e.jsx(X,{value:"broadcast",className:"space-y-6",children:e.jsx(Fs,{})}),e.jsx(X,{value:"escalation",className:"space-y-6",children:e.jsx(Us,{})}),e.jsx(X,{value:"partnerships",className:"space-y-6",children:e.jsx(yt,{})}),e.jsx(X,{value:"test",className:"space-y-6",children:e.jsx(Nt,{})})]})]})}const vt=({data:a,height:s=300})=>e.jsx("div",{className:"w-full bg-gray-50 rounded-lg p-4 flex items-center justify-center",style:{height:s},children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(De,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Trends Chart"}),e.jsxs("p",{className:"text-xs",children:[a.length," months of data"]})]})}),bt=({data:a,height:s=300})=>e.jsx("div",{className:"w-full bg-gray-50 rounded-lg p-4 flex items-center justify-center",style:{height:s},children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Blood Type Distribution"}),e.jsxs("p",{className:"text-xs",children:[a.length," blood types"]})]})}),wt=[{id:"1",title:"Monthly Donation Summary",type:"donation",description:"Comprehensive overview of all donations for the current month",dateRange:"Jan 2024",status:"ready",lastGenerated:"2024-01-28T10:30:00Z",size:"2.4 MB"},{id:"2",title:"Blood Request Analytics",type:"request",description:"Analysis of blood requests, fulfillment rates, and response times",dateRange:"Q4 2023",status:"ready",lastGenerated:"2024-01-15T14:20:00Z",size:"1.8 MB"},{id:"3",title:"Inventory Status Report",type:"inventory",description:"Current blood bank inventory levels and expiration tracking",dateRange:"Current",status:"ready",lastGenerated:"2024-01-28T09:15:00Z",size:"1.2 MB"},{id:"4",title:"Community Impact Report",type:"impact",description:"Lives saved, community engagement, and donor retention metrics",dateRange:"2023 Annual",status:"ready",lastGenerated:"2024-01-20T16:45:00Z",size:"5.6 MB"}],Ye=[{month:"Jul",donations:45,requests:52,fulfilled:48},{month:"Aug",donations:52,requests:48,fulfilled:45},{month:"Sep",donations:48,requests:65,fulfilled:58},{month:"Oct",donations:61,requests:55,fulfilled:52},{month:"Nov",donations:55,requests:70,fulfilled:63},{month:"Dec",donations:67,requests:58,fulfilled:55},{month:"Jan",donations:58,requests:75,fulfilled:68}],Ct=[{bloodType:"O+",donations:28,requests:32,color:"#dc2626"},{bloodType:"A+",donations:24,requests:26,color:"#ea580c"},{bloodType:"B+",donations:18,requests:22,color:"#d97706"},{bloodType:"AB+",donations:12,requests:15,color:"#ca8a04"},{bloodType:"O-",donations:15,requests:18,color:"#65a30d"},{bloodType:"A-",donations:11,requests:14,color:"#2563eb"},{bloodType:"B-",donations:8,requests:11,color:"#7c3aed"},{bloodType:"AB-",donations:5,requests:7,color:"#db2777"}];function kt({userRole:a,userProfile:s}){const[r,g]=p.useState(wt),[o,h]=p.useState({dateRange:"month",startDate:"",endDate:"",bloodTypes:[],locations:[],status:[],reportTypes:[]}),[l,c]=p.useState(!1),[N,f]=p.useState([]),j=async i=>{c(!0),await new Promise(M=>setTimeout(M,2e3));const k={id:Date.now().toString(),title:`${i} Report`,type:i,description:`Generated ${i} report based on current filters`,dateRange:"Custom",status:"ready",lastGenerated:new Date().toISOString(),size:"1.5 MB"};g(M=>[k,...M]),c(!1)},u=async i=>{console.log("Exporting PDF for report:",i);const k=r.find(M=>M.id===i);if(k){const M=`
        ${k.title}
        Generated: ${new Date(k.lastGenerated).toLocaleString()}
        
        This is a mock PDF export. In a real implementation, this would contain:
        - Detailed charts and graphs
        - Data tables
        - Statistical analysis
        - Professional formatting
      `,t=new Blob([M],{type:"application/pdf"}),b=URL.createObjectURL(t),P=document.createElement("a");P.href=b,P.download=`${k.title.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(b)}},m=async i=>{console.log("Exporting CSV for report:",i);const k=r.find(M=>M.id===i);if(k){const M=[["Date","Donations","Requests","Fulfilled"],...Ye.map(G=>[G.month,G.donations,G.requests,G.fulfilled])].map(G=>G.join(",")).join(`
`),t=new Blob([M],{type:"text/csv"}),b=URL.createObjectURL(t),P=document.createElement("a");P.href=b,P.download=`${k.title.replace(/\s+/g,"_")}.csv`,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(b)}},d=i=>{N.forEach(k=>{i==="pdf"?u(k):m(k)}),f([])},S=i=>{switch(i){case"donation":return e.jsx(ta,{className:"w-4 h-4"});case"request":return e.jsx(oe,{className:"w-4 h-4"});case"inventory":return e.jsx(ce,{className:"w-4 h-4"});case"impact":return e.jsx(De,{className:"w-4 h-4"});default:return e.jsx(ts,{className:"w-4 h-4"})}},C=i=>{switch(i){case"ready":return"bg-green-100 text-green-800 border-green-200";case"generating":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Reporting Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Generate and export comprehensive reports"})]}),e.jsxs(y,{onClick:()=>window.location.reload(),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),e.jsxs(Ie,{defaultValue:"reports",className:"w-full",children:[e.jsxs($e,{className:"grid w-full grid-cols-4",children:[e.jsx(Y,{value:"reports",className:"text-xs sm:text-sm px-1 sm:px-3",children:"Available Reports"}),e.jsx(Y,{value:"generate",className:"text-xs sm:text-sm px-1 sm:px-3",children:"Generate New"}),e.jsx(Y,{value:"analytics",className:"text-xs sm:text-sm px-1 sm:px-3",children:"Analytics"}),e.jsx(Y,{value:"schedule",className:"text-xs sm:text-sm px-1 sm:px-3",children:"Scheduled"})]}),e.jsxs(X,{value:"reports",className:"space-y-6",children:[N.length>0&&e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm font-medium",children:[N.length," report",N.length>1?"s":""," selected"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{size:"sm",onClick:()=>d("pdf"),children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Export PDF"]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>d("csv"),children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsx(y,{size:"sm",variant:"ghost",onClick:()=>f([]),children:"Clear Selection"})]})]})})}),e.jsx("div",{className:"grid gap-4",children:r.map(i=>e.jsx(D,{className:"hover:shadow-md transition-shadow duration-200",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx(Fa,{checked:N.includes(i.id),onCheckedChange:k=>{f(k?[...N,i.id]:N.filter(M=>M!==i.id))}}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S(i.type),e.jsx("h3",{className:"font-semibold",children:i.title}),e.jsx(B,{className:C(i.status),children:i.status})]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["ðŸ“… ",i.dateRange]}),e.jsxs("span",{children:["ðŸ“Š ",i.size]}),e.jsxs("span",{children:["ðŸ•’ Generated ",new Date(i.lastGenerated).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 ml-4",children:[e.jsxs(y,{size:"sm",onClick:()=>u(i.id),className:"text-xs sm:text-sm",children:[e.jsx(We,{className:"w-4 h-4 mr-1"}),"PDF"]}),e.jsxs(y,{size:"sm",variant:"outline",onClick:()=>m(i.id),className:"text-xs sm:text-sm",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"CSV"]}),e.jsxs(y,{size:"sm",variant:"ghost",className:"text-xs sm:text-sm",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Email"]})]})]})})},i.id))})]}),e.jsx(X,{value:"generate",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Generate New Report"}),e.jsx(_,{children:"Create custom reports based on your criteria"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{children:"Report Type"}),e.jsxs(H,{children:[e.jsx(q,{children:e.jsx(z,{placeholder:"Select report type"})}),e.jsxs(O,{children:[e.jsx(x,{value:"donation",children:"Donation Summary"}),e.jsx(x,{value:"request",children:"Request Analytics"}),e.jsx(x,{value:"inventory",children:"Inventory Report"}),e.jsx(x,{value:"impact",children:"Impact Analysis"}),e.jsx(x,{value:"donor",children:"Donor Statistics"}),e.jsx(x,{value:"financial",children:"Financial Summary"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{children:"Date Range"}),e.jsxs(H,{value:o.dateRange,onValueChange:i=>h({...o,dateRange:i}),children:[e.jsx(q,{children:e.jsx(z,{})}),e.jsxs(O,{children:[e.jsx(x,{value:"week",children:"Last Week"}),e.jsx(x,{value:"month",children:"Last Month"}),e.jsx(x,{value:"quarter",children:"Last Quarter"}),e.jsx(x,{value:"year",children:"Last Year"}),e.jsx(x,{value:"custom",children:"Custom Range"})]})]})]}),o.dateRange==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{children:"Start Date"}),e.jsx(L,{type:"date",value:o.startDate,onChange:i=>h({...o,startDate:i.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{children:"End Date"}),e.jsx(L,{type:"date",value:o.endDate,onChange:i=>h({...o,endDate:i.target.value})})]})]}),e.jsx(y,{className:"w-full",onClick:()=>j("Custom"),disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Generate Report"]})})]})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Quick Reports"}),e.jsx(_,{children:"Generate common reports instantly"})]}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs(y,{variant:"outline",className:"w-full justify-start",onClick:()=>j("Daily Summary"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Daily Summary Report"]}),e.jsxs(y,{variant:"outline",className:"w-full justify-start",onClick:()=>j("Blood Type Analysis"),children:[e.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Blood Type Analysis"]}),e.jsxs(y,{variant:"outline",className:"w-full justify-start",onClick:()=>j("Donor Engagement"),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Donor Engagement Report"]}),e.jsxs(y,{variant:"outline",className:"w-full justify-start",onClick:()=>j("Emergency Response"),children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Emergency Response Metrics"]})]})]})]})}),e.jsxs(X,{value:"analytics",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Donation vs Request Trends"}),e.jsx(_,{children:"7-month comparison overview"})]}),e.jsx(T,{children:e.jsx(vt,{data:Ye,height:300})})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Blood Type Distribution"}),e.jsx(_,{children:"Donations vs requests by blood type"})]}),e.jsx(T,{children:e.jsx(bt,{data:Ct,height:300})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"87%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fulfillment Rate"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"2.4h"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response Time"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:"342"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Donors"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"1,248"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lives Saved"})]})})]})]}),e.jsx(X,{value:"schedule",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Scheduled Reports"}),e.jsx(_,{children:"Automatically generated reports sent to your email"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No scheduled reports yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set up automatic report generation and delivery"}),e.jsxs(y,{className:"mt-4",size:"sm",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Schedule Report"]})]})})]})})]})]})}function Vt({userRole:a,onSignOut:s,onNavigateToHome:r}){const[g,o]=p.useState("home"),[h,l]=p.useState(!1),[c,N]=p.useState(null),[f,j]=p.useState(!0),[u,m]=p.useState(0),d=p.useRef(null);p.useEffect(()=>{i()},[]),p.useEffect(()=>(c&&(S(),K.requestPermission().then(t=>{t&&console.log(`ðŸ“³ Notification permission granted for ${a}`)})),()=>{d.current&&K.stopPolling(d.current)}),[c,a]);const S=()=>{if(!c)return;const t=c.id;console.log(`ðŸ”” Starting notification polling for ${a}:`,t),d.current=K.startPolling(t,a,15e3),C()},C=async()=>{if(c)try{const b=(await K.fetchNotifications(c.id)).filter(P=>!P.read).length;m(b)}catch(t){console.debug("Error fetching notification count:",t)}},i=async()=>{try{j(!0);const{profile:t}=await sa.get();N(t),console.log("âœ… Profile loaded successfully:",t.fullName)}catch(t){if(console.error("Error fetching user profile:",t),t.message?.includes("Demo profile not found")){console.log("ðŸ”§ Demo profile missing, attempting to restore...");const b=localStorage.getItem("demo_session");if(b)try{const G=JSON.parse(b).user?.email;je(async()=>{const{DEMO_USERS:n}=await import("./client-o4yWeWyG.js");return{DEMO_USERS:n}},__vite__mapDeps([0,1,2])).then(({DEMO_USERS:n})=>{if(G&&G in n){const w=n[G].profile;localStorage.setItem("demo_profile",JSON.stringify(w)),N(w),console.log("âœ… Demo profile restored and loaded"),A.success("Demo profile restored");return}})}catch(P){console.warn("Failed to restore demo profile:",P)}}A.error("Failed to load user profile. Please try signing in again.")}finally{j(!1)}},k=()=>{o("requests")};if(f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ne,{className:"w-8 h-8 animate-spin text-red-600 mx-auto"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});if(!c)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[e.jsx(ee,{className:"w-8 h-8 text-red-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Profile Loading Issue"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We're having trouble loading your profile. This might be a temporary network issue."})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(y,{onClick:i,variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsxs(y,{onClick:s,variant:"ghost",size:"sm",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Sign Out & Try Demo Account"]})]})]})});const M=()=>a==="donor"?"grid-cols-5":a==="clinic"?"grid-cols-6":"grid-cols-5";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-8 h-8 text-red-600"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"BloodConnect"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{variant:"secondary",className:"hidden md:inline-flex",children:a==="donor"?"Donor Dashboard":a==="clinic"?"Healthcare Dashboard":"Patient Dashboard"}),d.current&&e.jsxs(B,{className:"hidden md:inline-flex bg-green-100 text-green-800 border-green-200",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),a==="donor"?"Live Blood Request Matching":"Live Donor Response Alerts"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-red-600",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Emergency: 911"})]}),r&&e.jsxs(y,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Xe,{className:"w-8 h-8 cursor-pointer hover:ring-2 hover:ring-red-200 transition-all duration-200",onClick:()=>o("profile"),title:"View Profile",children:[e.jsx(Ze,{src:""}),e.jsx(Qe,{children:c.fullName.split(" ").map(t=>t[0]).join("").toUpperCase()})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("p",{className:"text-sm font-medium",children:c.fullName}),e.jsx("p",{className:"text-xs text-gray-500",children:a==="donor"?c.bloodType:a==="clinic"?c.organizationName||"Medical Professional":"Patient"})]})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{className:"md:hidden",onClick:()=>l(!h),children:e.jsx(Ea,{className:"w-6 h-6 text-gray-700"})})]})]}),h&&e.jsxs("div",{className:"md:hidden py-4 border-t",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs(y,{variant:g==="home"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("home"),l(!1)},children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Home"})]}),e.jsx(y,{variant:g==="requests"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("requests"),l(!1)},children:a==="donor"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Requests"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"New"})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs(y,{variant:g==="history"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("history"),l(!1)},children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"History"})]}),e.jsxs(y,{variant:g==="notifications"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3 relative",onClick:()=>{o("notifications"),l(!1),C()},children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Alerts"}),u>0&&e.jsx(B,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-4 h-4 flex items-center justify-center rounded-full",children:u>9?"9+":u})]}),e.jsxs(y,{variant:g==="profile"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("profile"),l(!1)},children:[e.jsx(_e,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Profile"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[(a==="clinic"||a==="patient")&&e.jsxs(y,{variant:g==="reports"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("reports"),l(!1)},children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Reports"})]}),a==="clinic"&&e.jsxs(y,{variant:g==="emergency"?"default":"ghost",className:"flex flex-col items-center gap-1 h-auto py-3",onClick:()=>{o("emergency"),l(!1)},children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:"Emergency"})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-600",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Emergency: 911"})]}),r&&e.jsxs(y,{variant:"outline",className:"w-full mb-2",onClick:r,children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(y,{variant:"outline",className:"w-full border-red-600 text-red-600 hover:bg-red-50",onClick:s,children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(Ie,{value:g,onValueChange:o,className:"w-full",children:[e.jsxs($e,{className:`grid w-full ${M()} mb-8`,children:[e.jsxs(Y,{value:"home",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Home"})]}),e.jsxs(Y,{value:"requests",className:"flex items-center gap-2",children:[a==="donor"?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a==="donor"?"Requests":"New Request"})]}),e.jsxs(Y,{value:"history",className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"History"})]}),e.jsxs(Y,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs(Y,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Notifications"}),u>0&&e.jsx(B,{className:"ml-1 bg-red-500 text-white text-xs min-w-5 h-5 flex items-center justify-center rounded-full",children:u>99?"99+":u})]}),(a==="clinic"||a==="patient")&&e.jsxs(Y,{value:"reports",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reports"})]}),a==="clinic"&&e.jsxs(Y,{value:"emergency",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Emergency"})]})]}),e.jsx(X,{value:"home",className:"space-y-6",children:a==="donor"?e.jsx(Gs,{userProfile:c,setActiveTab:o}):e.jsx(At,{userProfile:c,onNavigateToNewRequest:k,setActiveTab:o})}),e.jsx(X,{value:"requests",children:a==="donor"?e.jsx(qs,{userProfile:c}):e.jsx(St,{userProfile:c})}),e.jsx(X,{value:"history",children:a==="donor"?e.jsx(Dt,{userProfile:c}):e.jsx(Tt,{userProfile:c})}),e.jsxs(X,{value:"profile",className:"space-y-6",children:[e.jsx(Ps,{userProfile:c,onProfileUpdate:i}),e.jsx(Ks,{userProfile:c})]}),e.jsx(X,{value:"notifications",children:e.jsx(zs,{userProfile:c,onNotificationUpdate:C})}),(a==="clinic"||a==="patient")&&e.jsx(X,{value:"reports",children:e.jsx(kt,{userRole:a,userProfile:c})}),a==="clinic"&&e.jsx(X,{value:"emergency",children:e.jsx(ft,{})})]})})]})}function At({userProfile:a,onNavigateToNewRequest:s,setActiveTab:r}){return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(D,{className:"md:col-span-2 lg:col-span-3",children:[e.jsxs(R,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Welcome back, ",a.fullName.split(" ")[0]]}),e.jsxs(_,{children:[a.organizationName||"Managing blood requests"," in ",a.location]})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"0"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Requests"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"0"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Fulfilled Requests"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"0"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Matched Donors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.organizationType||"Healthcare"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Organization Type"})]})]})})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsx(E,{children:"Quick Actions"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs(y,{className:"w-full",onClick:s,children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"New Blood Request"]}),e.jsxs(y,{variant:"outline",className:"w-full",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Find Blood Banks"]}),e.jsxs(y,{variant:"outline",className:"w-full",onClick:()=>r?.("notifications"),children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"View Notifications"]})]})]}),e.jsxs(D,{className:"md:col-span-2",children:[e.jsx(R,{children:e.jsx(E,{children:"Recent Blood Requests"})}),e.jsx(T,{children:e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No recent requests"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Create your first blood request to get started"})]})})]})]})}function St({userProfile:a}){return e.jsx("div",{className:"space-y-6",children:e.jsx(Os,{userProfile:a})})}function Dt({userProfile:a}){return e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Donation History"}),e.jsx(_,{children:"Your past blood donations"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(J,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No donation history yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your future donations will appear here"})]})})]})}function Tt({userProfile:a}){return e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(E,{children:"Request History"}),e.jsx(_,{children:"Your past blood requests"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(J,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No request history yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your future requests will appear here"})]})})]})}export{Vt as Dashboard};
