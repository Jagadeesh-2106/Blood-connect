import{c as se,r as c,j as e,t as N,B as P,a as G,b as J,S as ke,d as Z,f as Q,e as X,R as Y,g as ie,C as Te,H as K,h as ne,P as De}from"./index-DNIlUR1s.js";import{T as Ie,a as Ee,b as ue,c as he,S as xe}from"./tabs-Dkw5DwG9.js";import{I,S as ge,a as pe,b as fe,c as be,d as je}from"./select-Bb3RTuD4.js";import{A as le,L as w,a as de,b as me,U as Fe,C as oe}from"./alert-0M9sgyUM.js";import{C as z}from"./circle-check-big-Ds_kcbNd.js";import{API_BASE_URL as ye,publicAnonKey as Be,getDetailedConnectivityStatus as Ae,auth as we}from"./client-o4yWeWyG.js";import{C as ce}from"./index-CLj2UTeR.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ae=se("eye-off",Re);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],re=se("eye",Ve);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Oe=se("key-round",$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ee=se("lock",Me);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],_e=se("server",qe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Le=se("wifi",Ue);function Ye({length:h=6,value:x,onChange:f,onComplete:g,disabled:S=!1,autoFocus:k=!1}){const r=c.useRef([]),[E,t]=c.useState(k?0:null);c.useEffect(()=>{r.current=r.current.slice(0,h)},[h]),c.useEffect(()=>{k&&r.current[0]&&r.current[0].focus()},[k]);const d=(i,l)=>{const o=l.replace(/[^0-9]/g,"");if(o.length>1){const y=o.slice(0,h).split(""),D=x.split("");for(let v=0;v<y.length&&i+v<h;v++)D[i+v]=y[v];const $=D.join("").padEnd(h,"");f($.slice(0,h));const u=Math.min(i+y.length,h-1);r.current[u]?.focus()}else{const y=x.split("");y[i]=o;const D=y.join("");f(D),o&&i<h-1&&r.current[i+1]?.focus()}const T=x.split("");T[i]=o;const j=T.join("");j.length===h&&!j.includes("")&&g?.(j)},b=(i,l)=>{if(l.key==="Backspace"){l.preventDefault();const o=x.split("");o[i]?(o[i]="",f(o.join(""))):i>0&&(o[i-1]="",f(o.join("")),r.current[i-1]?.focus())}else if(l.key==="ArrowLeft"&&i>0)l.preventDefault(),r.current[i-1]?.focus();else if(l.key==="ArrowRight"&&i<h-1)l.preventDefault(),r.current[i+1]?.focus();else if(l.key==="Delete"){l.preventDefault();const o=x.split("");o[i]="",f(o.join(""))}else l.key==="Enter"&&(l.preventDefault(),x.length===h&&!x.includes("")&&g?.(x))},A=i=>{i.preventDefault();const o=i.clipboardData.getData("text").replace(/[^0-9]/g,"");if(o){const T=o.slice(0,h).padEnd(h,"");f(T.slice(0,h));const j=Math.min(o.length-1,h-1);r.current[j]?.focus(),o.length>=h&&g?.(o.slice(0,h))}};return e.jsx("div",{className:"flex gap-2 justify-center",children:Array.from({length:h},(i,l)=>e.jsx(I,{ref:o=>r.current[l]=o,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:x[l]||"",onChange:o=>d(l,o.target.value),onKeyDown:o=>b(l,o),onPaste:A,onFocus:()=>t(l),onBlur:()=>t(null),disabled:S,className:`
            w-12 h-12 text-center text-lg font-semibold border-2 rounded-lg
            transition-all duration-200
            ${E===l?"border-red-500 ring-2 ring-red-200":x[l]?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}
            ${S?"opacity-50 cursor-not-allowed":"cursor-text"}
          `,"aria-label":`OTP digit ${l+1}`},l))})}function ze({email:h,onVerificationSuccess:x,onNavigateBack:f,userType:g,title:S,description:k}){const[r,E]=c.useState(""),[t,d]=c.useState(!1),[b,A]=c.useState(!1),[i,l]=c.useState(0),[o,T]=c.useState(null),[j,y]=c.useState(0),[D,$]=c.useState(!1),[u,v]=c.useState(h),[O]=c.useState(5),L=g==="new-user"?"Verify Your Email Address":"Email Verification Required",m=g==="new-user"?"We've sent a 6-digit verification code to confirm your email address and secure your account.":"Please verify your email address to proceed with password reset.";c.useEffect(()=>{let C;return i>0&&(C=setTimeout(()=>{l(i-1)},1e3)),()=>clearTimeout(C)},[i]),c.useEffect(()=>{R(h)},[]);const R=async C=>{try{A(!0),T(null),await new Promise(B=>setTimeout(B,1500)),console.log(`📧 OTP sent to: ${C} (Type: ${g})`),console.log("🔢 Demo OTP: 123456"),N.success(`Verification code sent to ${C}`),l(60)}catch(q){console.error("Error sending OTP:",q),T("Failed to send verification code. Please try again."),N.error("Failed to send verification code")}finally{A(!1)}},M=async C=>{await W(C)},W=async C=>{if(j>=O){T("Maximum verification attempts exceeded. Please request a new code.");return}d(!0),T(null);try{if(await new Promise(B=>setTimeout(B,1e3)),["123456","000000"].includes(C))console.log("✅ OTP verification successful"),N.success("Email verified successfully!"),x();else throw new Error("Invalid verification code")}catch{const B=j+1;y(B);let _="Invalid verification code. Please try again.";B>=O?(_="Maximum attempts exceeded. Please request a new verification code.",E("")):_+=` (${O-B} attempts remaining)`,T(_),N.error("Invalid verification code"),B<O&&E("")}finally{d(!1)}},F=async()=>{i>0||(y(0),E(""),await R(u))},H=async()=>{if(!u||u===h){$(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)){T("Please enter a valid email address.");return}$(!1),y(0),E(""),await R(u)},te=C=>{const q=Math.floor(C/60),B=C%60;return`${q}:${B.toString().padStart(2,"0")}`};return e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(P,{variant:"ghost",onClick:f,className:"text-gray-600 hover:text-gray-900 p-0 h-auto",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Back"]})}),e.jsxs(G,{className:"shadow-2xl border-0",children:[e.jsxs(J,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-blue-600"})}),e.jsx(Z,{className:"text-2xl",children:S||L}),e.jsx(Q,{className:"text-center",children:k||m})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Email Address"}),D?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{type:"email",value:u,onChange:C=>v(C.target.value),placeholder:"Enter your email",className:"flex-1"}),e.jsx(P,{size:"sm",onClick:H,disabled:b,children:b?e.jsx(Y,{className:"w-4 h-4 animate-spin"}):"Update"})]}):e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>$(!0),className:"text-blue-600 hover:text-blue-700 p-1 h-auto",children:"Edit"})]})]}),o&&e.jsx(de,{variant:"destructive",children:e.jsx(me,{children:o})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{className:"text-center block",children:"Enter Verification Code"}),e.jsx(Ye,{length:6,value:r,onChange:E,onComplete:M,disabled:t||j>=O,autoFocus:!0}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-700 text-center",children:["💡 ",e.jsx("strong",{children:"Demo Mode:"})," Use code ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"123456"})," or ",e.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"000000"})]})})]}),e.jsx(P,{onClick:()=>W(r),disabled:r.length!==6||t||j>=O,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Verify Email"]})}),e.jsxs("div",{className:"text-center space-y-3 pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Didn't receive the code?"}),i>0?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsxs("span",{children:["Resend available in ",te(i)]})]}):e.jsx(P,{variant:"outline",onClick:F,disabled:b,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Resend Code"]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[e.jsx("p",{children:"Check your spam folder if you don't see the email."}),e.jsx("p",{children:"The verification code will expire in 10 minutes."})]})]})]})]})})}function We({onNavigateBack:h,onResetComplete:x}){const[f,g]=c.useState("email"),[S,k]=c.useState(""),[r,E]=c.useState(""),[t,d]=c.useState(""),[b,A]=c.useState(!1),[i,l]=c.useState(null),[o,T]=c.useState(!1),[j,y]=c.useState(!1),D=m=>m.length>=8&&/[A-Z]/.test(m)&&/[a-z]/.test(m)&&/\d/.test(m)&&/[!@#$%^&*(),.?\":{}|<>]/.test(m),$=m=>m?m.length<8?"bg-red-400":D(m)?"bg-green-400":"bg-yellow-400":"bg-gray-200",u=m=>m?m.length<8?"Too short (minimum 8 characters)":D(m)?"Strong password":"Good (add symbols for strong)":"Password required",v=async m=>{if(m.preventDefault(),l(null),!S){l("Please enter your email address.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S)){l("Please enter a valid email address.");return}A(!0);try{await new Promise(M=>setTimeout(M,1e3)),console.log(`🔍 Password reset requested for: ${S}`),g("verification")}catch(M){console.error("Email check error:",M),l("Unable to process your request. Please try again.")}finally{A(!1)}},O=()=>{console.log("✅ Email verification successful, proceeding to password reset"),g("new-password")},L=async m=>{if(m.preventDefault(),l(null),!r||!t){l("Please fill in both password fields.");return}if(r!==t){l("Passwords do not match.");return}if(!D(r)){l("Password must be at least 8 characters with uppercase, lowercase, number, and special character.");return}A(!0);try{await new Promise(R=>setTimeout(R,1500)),console.log("🔒 Password updated successfully"),N.success("Password updated successfully!"),g("success")}catch(R){console.error("Password update error:",R),l("Failed to update password. Please try again."),N.error("Failed to update password")}finally{A(!1)}};return f==="email"?e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(P,{variant:"ghost",onClick:h,className:"text-gray-600 hover:text-gray-900 p-0 h-auto",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})}),e.jsxs(G,{className:"shadow-2xl border-0",children:[e.jsxs(J,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Oe,{className:"w-8 h-8 text-purple-600"})}),e.jsx(Z,{className:"text-2xl",children:"Reset Your Password"}),e.jsx(Q,{children:"Enter your email address and we'll send you a verification code to reset your password."})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i&&e.jsx(de,{variant:"destructive",children:e.jsx(me,{children:i})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"reset-email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"reset-email",type:"email",value:S,onChange:m=>k(m.target.value),placeholder:"Enter your email address",className:"pl-10",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"We'll send a verification code to this email address."})]}),e.jsx(P,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3",disabled:!S||b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Send Verification Code"]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-700 text-center",children:["💡 ",e.jsx("strong",{children:"Demo Mode:"})," Any valid email format will work for testing"]})})]})]})]})}):f==="verification"?e.jsx(ze,{email:S,onVerificationSuccess:O,onNavigateBack:()=>g("email"),userType:"forgot-password",title:"Verify Your Email",description:"Please enter the verification code we sent to your email to proceed with password reset."}):f==="new-password"?e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-green-50 to-teal-50 flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(G,{className:"shadow-2xl border-0",children:[e.jsxs(J,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ee,{className:"w-8 h-8 text-green-600"})}),e.jsx(Z,{className:"text-2xl",children:"Create New Password"}),e.jsx(Q,{children:"Choose a strong password for your BloodConnect account."})]}),e.jsx(X,{className:"space-y-6",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[i&&e.jsx(de,{variant:"destructive",children:e.jsx(me,{children:i})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"new-password",type:o?"text":"password",value:r,onChange:m=>E(m.target.value),placeholder:"Create a strong password",className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>T(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]}),r&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ${$(r)}`,style:{width:r.length>=8?D(r)?"100%":"75%":"25%"}})}),e.jsx("span",{className:"text-xs text-gray-600",children:u(r)})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must include: 8+ characters, uppercase, lowercase, number, and symbol"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"confirm-password",type:j?"text":"password",value:t,onChange:m=>d(m.target.value),placeholder:"Confirm your new password",className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]}),t&&e.jsx("div",{className:"mt-2",children:r===t?e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),"Passwords match"]}):e.jsx("p",{className:"text-xs text-red-600",children:"Passwords do not match"})})]}),e.jsx(P,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white py-3",disabled:!r||!t||r!==t||!D(r)||b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Update Password"]})})]})})]})})}):f==="success"?e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(G,{className:"shadow-2xl border-0",children:[e.jsxs(J,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(z,{className:"w-8 h-8 text-green-600"})}),e.jsx(Z,{className:"text-2xl",children:"Password Updated!"}),e.jsx(Q,{children:"Your password has been successfully updated. You can now sign in with your new password."})]}),e.jsxs(X,{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900",children:"Security Update Complete"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your account is now secured with your new password."})]})]})}),e.jsxs(P,{onClick:x,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Continue to Sign In"]})]})]})})}):null}function He({onClose:h}){const[x,f]=c.useState({internet:{status:"testing",message:"Checking internet connection..."},supabase:{status:"testing",message:"Testing Supabase connection..."},backend:{status:"testing",message:"Testing backend server..."},auth:{status:"testing",message:"Testing authentication service..."}}),[g,S]=c.useState(!1),k=async()=>{S(!0);try{const d=await Ae();f({internet:{status:d.internet?"success":"error",message:d.internet?"Internet connection is working":`No internet connection: ${d.details.internetError}`},supabase:{status:d.supabase?"success":"error",message:d.supabase?"Supabase connection is working":`Supabase error: ${d.details.supabaseError}`},backend:{status:d.backend?"success":"error",message:d.backend?"Backend server is responding":`Backend server error: ${d.details.backendError}`},auth:{status:d.auth?"success":"error",message:d.auth?"Authentication service is working":`Auth service error: ${d.details.authError}`}})}catch(d){console.error("Diagnostic error:",d),f({internet:{status:"error",message:"Could not perform connectivity tests"},supabase:{status:"error",message:"Could not perform connectivity tests"},backend:{status:"error",message:"Could not perform connectivity tests"},auth:{status:"error",message:"Could not perform connectivity tests"}})}S(!1)};c.useEffect(()=>{k()},[]);const r=d=>{switch(d){case"success":return e.jsx(z,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ce,{className:"w-5 h-5 text-red-600"});case"testing":return e.jsx(Y,{className:"w-5 h-5 text-blue-600 animate-spin"});default:return e.jsx(ce,{className:"w-5 h-5 text-gray-400"})}},E=d=>{switch(d){case"success":return e.jsx(ne,{variant:"outline",className:"text-green-600 border-green-600",children:"Connected"});case"error":return e.jsx(ne,{variant:"outline",className:"text-red-600 border-red-600",children:"Failed"});case"testing":return e.jsx(ne,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Testing..."});default:return e.jsx(ne,{variant:"outline",children:"Unknown"})}},t=Object.values(x).some(d=>d.status==="error");return e.jsxs(G,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx(Z,{children:"Connectivity Diagnostic"}),e.jsx(Q,{children:"Checking connection to BloodConnect services"})]})]})}),e.jsxs(X,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:Object.entries(x).map(([d,b])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r(b.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:d==="backend"?"Backend Server":d==="supabase"?"Supabase Database":d==="auth"?"Authentication":"Internet"}),e.jsx("div",{className:"text-sm text-gray-600",children:b.message})]})]}),E(b.status)]},d))}),t&&e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Connection Issues Detected"}),e.jsxs("div",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[x.backend.status==="error"&&e.jsx("p",{children:"• Backend server is not responding. This is likely because the Supabase Edge Function is not deployed."}),x.internet.status==="error"&&e.jsx("p",{children:"• No internet connection. Please check your network connection."}),x.supabase.status==="error"&&e.jsx("p",{children:"• Supabase database connection failed. Please check your Supabase configuration."}),x.auth.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"• Authentication service issues detected."}),x.auth.message?.includes("Email logins are disabled")&&e.jsx("p",{className:"ml-4 text-sm",children:"→ Email authentication is disabled in Supabase settings. Enable it in Authentication → Settings → Auth Providers."})]})]})]})]})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Demo Mode Available"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"If you're experiencing connectivity issues, you can still use BloodConnect with demo accounts. These work completely offline and showcase all features."})]})]})}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(P,{onClick:k,disabled:g,variant:"outline",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2 animate-spin"}),"Retesting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Retest Connection"]})}),e.jsx(P,{onClick:h,children:"Close Diagnostic"})]}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"text-sm text-gray-600 cursor-pointer hover:text-gray-800",children:"Technical Details"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1 bg-gray-50 p-3 rounded",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"API Endpoint:"})," ",ye]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Health Check:"})," ",ye,"/health"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Authentication:"})," Bearer ",Be.substring(0,20),"..."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Demo Mode:"})," ",localStorage.getItem("demo_session")?"Enabled":"Disabled"]})]})]})]})]})}const Ke=["A+","A-","B+","B-","AB+","AB-","O+","O-"],Ge=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh"];function as({onNavigateToHome:h,onAuthSuccess:x}){const[f,g]=c.useState("main"),[S,k]=c.useState("signin"),[r,E]=c.useState({email:"",password:"",stayLoggedIn:!1}),[t,d]=c.useState({fullName:"",email:"",phone:"",dateOfBirth:"",bloodType:"",city:"",state:"",password:"",confirmPassword:"",agreedToTerms:!1,agreedToPrivacy:!1}),[b,A]=c.useState(!1),[i,l]=c.useState(!1),[o,T]=c.useState(!1),[j,y]=c.useState(!1),[D,$]=c.useState(!1),[u,v]=c.useState(null),[O,L]=c.useState(!1),m=(s,a)=>{E(n=>({...n,[s]:a}))},R=s=>{const a=s.replace(/\D/g,"");if(a.startsWith("91")&&a.length===12)return`+91 ${a.slice(2,7)} ${a.slice(7)}`;if(a.length===10)return`+91 ${a.slice(0,5)} ${a.slice(5)}`;if(s.startsWith("+91")){const n=a.slice(2);if(n.length===10)return`+91 ${n.slice(0,5)} ${n.slice(5)}`}return s},M=s=>{const a=s.replace(/\D/g,"");if(a.length===10)return/^[6-9]\d{9}$/.test(a);if(a.length===12&&a.startsWith("91")){const n=a.slice(2);return/^[6-9]\d{9}$/.test(n)}return!1},W=s=>{if(!s)return{isValid:!1,age:0,message:"Date of birth is required"};const a=new Date,n=new Date(s),p=a.getFullYear()-n.getFullYear(),V=a.getMonth()-n.getMonth(),U=V<0||V===0&&a.getDate()<n.getDate()?p-1:p;return U<18?{isValid:!1,age:U,message:"You must be at least 18 years old to register"}:U>65?{isValid:!0,age:U,message:"Please consult with a doctor before donating blood (age 65+)"}:{isValid:!0,age:U}},F=(s,a)=>{let n=a;s==="phone"&&(n=R(a)),d(p=>({...p,[s]:n})),u&&(s==="email"||s==="phone")&&v(null)},H=s=>s.length>=8&&/[A-Z]/.test(s)&&/[a-z]/.test(s)&&/\d/.test(s)&&/[!@#$%^&*(),.?\":{}|<>]/.test(s),te=s=>s?s.length<8?"bg-red-400":H(s)?"bg-green-400":"bg-yellow-400":"bg-gray-200",C=s=>s?s.length<8?"Too short (minimum 8 characters)":H(s)?"Strong password":"Good (add symbols for strong)":"Password required",q=()=>{const s=[],n=["fullName","email","phone","dateOfBirth","bloodType","city","state","password","confirmPassword"].filter(V=>!t[V]);n.length>0&&s.push(`Please fill in all required fields: ${n.join(", ")}`);const p=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(t.email&&!p.test(t.email)&&s.push("Please enter a valid email address"),["donor@demo.com","patient@demo.com","hospital@demo.com"].includes(t.email)&&s.push("This email is reserved for demo accounts"),t.phone&&!M(t.phone)&&s.push("Please enter a valid Indian mobile number (10 digits starting with 6, 7, 8, or 9)"),t.dateOfBirth){const V=W(t.dateOfBirth);V.isValid||s.push(V.message||"Invalid age")}return t.password!==t.confirmPassword&&s.push("Passwords do not match"),t.password&&!H(t.password)&&s.push("Password must be at least 8 characters with uppercase, lowercase, number, and special character"),t.agreedToTerms||s.push("Please agree to the Terms of Service"),t.agreedToPrivacy||s.push("Please agree to the Privacy Policy"),{isValid:s.length===0,errors:s}},B=()=>{g("password-reset")},_=(s,a)=>{v(null),L(!1),m("email",s),m("password","Demo123!"),k("signin"),N.success(`${a} demo account loaded! Click Sign In to continue offline.`,{duration:3e3})},ve=async s=>{s.preventDefault(),y(!0),v(null);try{const a=await we.signIn(r.email,r.password);if(a&&typeof a=="object"&&"requiresDemoMode"in a){console.log("🔧 Server unavailable, showing demo mode suggestion"),v(null),L(!0),N.info(a.message,{duration:6e3,action:{label:"Try Demo",onClick:()=>{_("donor@demo.com","Blood Donor"),L(!1)}}}),y(!1);return}const{session:n}=a;if(!n)throw new Error("Failed to create session");const p=r.email.includes("@demo.com");r.stayLoggedIn&&!p?(localStorage.setItem("bloodconnect_stay_logged_in","true"),localStorage.setItem("bloodconnect_session_token",n.access_token)):(localStorage.removeItem("bloodconnect_stay_logged_in"),localStorage.removeItem("bloodconnect_session_token")),console.log("Sign-in successful"),p?N.success("Welcome to BloodConnect Demo!"):N.success("Welcome back to BloodConnect!"),x()}catch(a){console.error("Sign-in error:",a),a.message?.includes("Invalid email or password")||a.message?.includes("Incorrect password for demo")||a.message?.includes("Email not verified")?(v(a.message),a.message?.includes("Incorrect password for demo")?N.error("Demo account password is: Demo123!",{duration:4e3}):N.error(a.message)):(console.log("🔧 Connectivity error, suggesting demo mode"),N.info("Servers are currently unavailable. Would you like to try our demo accounts?",{duration:6e3,action:{label:"Try Demo",onClick:()=>{_("donor@demo.com","Blood Donor")}}}))}finally{y(!1)}},Ne=async s=>{s.preventDefault(),y(!0),v(null);const a=q();if(!a.isValid){v(a.errors.join(`
`)),y(!1),N.error("Please fix the errors and try again");return}try{const n=t.phone.replace(/\D/g,""),p=n.startsWith("91")?`+${n}`:`+91${n}`,V=W(t.dateOfBirth),U={email:t.email.toLowerCase().trim(),password:t.password,fullName:t.fullName.trim(),role:"user",phoneNumber:p,location:`${t.city.trim()}, ${t.state}`,bloodType:t.bloodType,dateOfBirth:t.dateOfBirth,age:V.age,city:t.city.trim(),state:t.state,country:"India"};console.log("Creating account with Indian standards validation");const Se=await we.signUp(U.email,U.password,U);console.log("Registration successful:",Se),V.age>=65?N.success("Registration successful! Please consult with a doctor before donating blood.",{duration:6e3}):N.success("Registration successful! Welcome to BloodConnect."),$(!0),setTimeout(()=>{x()},2e3)}catch(n){console.error("Registration error:",n);let p="Registration failed. Please try again.";n.message?.includes("User already registered")||n.message?.includes("already been registered")||n.message?.includes("already exists")?(p="An account with this email already exists. Please use the Sign In tab instead.",k("signin")):n.message?.includes("reserved for demo")?p=n.message:n.message?.includes("Invalid email")?p="Please enter a valid email address.":n.message?.includes("Password")?p="Password must be at least 8 characters long and include uppercase, lowercase, number, and special characters.":n.message?.includes("Network connection failed")||n.message?.includes("Network")||n.message?.includes("timeout")||n.message?.includes("Failed to fetch")?p="Network connection failed. Please check your internet connection and try again.":n.message&&(p=n.message),v(p),N.error(p)}finally{y(!1)}},Pe=()=>{g("main"),k("signin"),N.success("You can now sign in with your new password!")},Ce=r.email&&r.password;return f==="password-reset"?e.jsx(We,{onNavigateBack:()=>g("main"),onResetComplete:Pe}):f==="connectivity-diagnostic"?e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(P,{variant:"ghost",onClick:()=>g("main"),className:"text-gray-600 hover:text-gray-900 p-0 h-auto",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Back to Authentication"]})}),e.jsx(He,{onClose:()=>g("main")})]})}):D?e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(z,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to BloodConnect!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully. You can now start saving lives by donating blood or requesting blood for those in need."}),e.jsx(P,{onClick:x,className:"w-full bg-green-600 hover:bg-green-700",children:"Get Started"})]})})}):e.jsx("section",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-50 flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(P,{variant:"ghost",onClick:h,className:"text-gray-600 hover:text-gray-900 p-0 h-auto",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),e.jsxs(G,{className:"shadow-2xl border-0",children:[e.jsxs(J,{className:"text-center pb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{className:"w-8 h-8 text-red-600"})}),e.jsx(Z,{className:"text-2xl",children:"Join BloodConnect"}),e.jsx(Q,{children:"One platform to donate blood and help save lives in your community"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"🚀 Try Demo Accounts (No Internet Required)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{type:"button",onClick:()=>_("donor@demo.com","Blood Donor"),className:"w-full text-left p-2 bg-white rounded border border-blue-200 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"🩸 Blood Donor:"})," donor@demo.com"]})}),e.jsx("button",{type:"button",onClick:()=>_("patient@demo.com","Blood Recipient"),className:"w-full text-left p-2 bg-white rounded border border-blue-200 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"🏥 Blood Recipient:"})," patient@demo.com"]})}),e.jsx("button",{type:"button",onClick:()=>_("hospital@demo.com","Healthcare Provider"),className:"w-full text-left p-2 bg-white rounded border border-blue-200 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"🩺 Healthcare Provider:"})," hospital@demo.com"]})}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"Password: Demo123!"})})]})]})]}),e.jsx(X,{className:"space-y-6",children:e.jsxs(Ie,{value:S,onValueChange:k,className:"w-full",children:[e.jsxs(Ee,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(ue,{value:"signin",className:"flex items-center gap-2 py-3",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Sign In"]}),e.jsxs(ue,{value:"register",className:"flex items-center gap-2 py-3",children:[e.jsx(K,{className:"w-4 h-4"}),"Register"]})]}),e.jsx(he,{value:"signin",className:"space-y-4",children:e.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[u&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-red-600 whitespace-pre-line leading-relaxed",children:u}),(u.includes("Invalid email or password")||u.includes("Incorrect password for demo"))&&e.jsxs("p",{className:"text-xs text-red-500 mt-3 pt-2 border-t border-red-200",children:["Don't have an account yet?"," ",e.jsx("button",{type:"button",onClick:()=>k("register"),className:"underline hover:no-underline font-medium",children:"Create one here"})]}),(u.includes("Cannot connect")||u.includes("Connection issue")||u.includes("Unable to connect")||u.includes("offline")||u.includes("Network unavailable"))&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-red-200 space-y-2",children:[e.jsxs("p",{className:"text-xs text-blue-600 mb-1",children:["💡 ",e.jsx("strong",{children:"Try Demo Accounts:"})," Click any demo account above to sign in offline"]}),e.jsxs(P,{type:"button",variant:"outline",size:"sm",onClick:()=>g("connectivity-diagnostic"),className:"w-full text-xs",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Run Connection Diagnostic"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"signin-email",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"signin-email",type:"email",value:r.email,onChange:s=>m("email",s.target.value),placeholder:"your.email@example.com",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"signin-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"signin-password",type:b?"text":"password",value:r.password,onChange:s=>m("password",s.target.value),placeholder:"Enter your password",className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{id:"stayLoggedIn",checked:r.stayLoggedIn,onCheckedChange:s=>m("stayLoggedIn",s)}),e.jsx(w,{htmlFor:"stayLoggedIn",className:"text-sm",children:"Stay logged in"})]}),e.jsx("button",{type:"button",onClick:B,className:"text-sm text-red-600 hover:text-red-700 hover:underline",children:"Forgot password?"})]}),e.jsx(P,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white py-3",disabled:!Ce||j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Sign In"]})})]})}),e.jsxs(he,{value:"register",className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Quick Registration"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Create your account instantly and start saving lives by donating or requesting blood in your community."})]})]})}),e.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[u&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-red-600 whitespace-pre-line",children:u}),(u.includes("already exists")||u.includes("already registered"))&&e.jsx("div",{className:"mt-3 pt-2 border-t border-red-200",children:e.jsxs("p",{className:"text-xs text-blue-600",children:["💡 ",e.jsx("strong",{children:"Already have an account?"})," Use the Sign In tab above to access your existing account."]})}),u.includes("reserved for demo")&&e.jsx("div",{className:"mt-3 pt-2 border-t border-red-200",children:e.jsxs("p",{className:"text-xs text-blue-600",children:["💡 ",e.jsx("strong",{children:"Demo Account:"}),' Use the Sign In tab and enter the password "Demo123!" to access the demo account.']})}),(u.includes("Network connection failed")||u.includes("check your internet connection")||u.includes("Unable to connect"))&&e.jsx("div",{className:"mt-3 pt-2 border-t border-red-200",children:e.jsxs(P,{type:"button",variant:"outline",size:"sm",onClick:()=>g("connectivity-diagnostic"),className:"w-full text-xs",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Diagnose Connection Issues"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Personal Information"}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(I,{id:"fullName",value:t.fullName,onChange:s=>F("fullName",s.target.value),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"register-email",children:"Email Address *"}),e.jsx(I,{id:"register-email",type:"email",value:t.email,onChange:s=>F("email",s.target.value),placeholder:"your.email@example.com",required:!0}),["donor@demo.com","patient@demo.com","hospital@demo.com"].includes(t.email)&&e.jsx("div",{className:"mt-1 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:'⚠️ This is a demo account. Use Sign In tab with password "Demo123!" instead.'})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"phone",children:"Mobile Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"phone",type:"tel",value:t.phone,onChange:s=>F("phone",s.target.value),placeholder:"+91 98765 43210",className:"pl-10",required:!0})]}),t.phone&&!M(t.phone)&&e.jsx("div",{className:"mt-1 text-xs text-red-600 bg-red-50 border border-red-200 rounded px-2 py-1",children:"Please enter a valid Indian mobile number (10 digits starting with 6, 7, 8, or 9)"}),t.phone&&M(t.phone)&&e.jsx("div",{className:"mt-1 text-xs text-green-600 bg-green-50 border border-green-200 rounded px-2 py-1",children:"✓ Valid Indian mobile number"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(I,{id:"dateOfBirth",type:"date",value:t.dateOfBirth,onChange:s=>F("dateOfBirth",s.target.value),max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],min:new Date(new Date().setFullYear(new Date().getFullYear()-100)).toISOString().split("T")[0],required:!0}),t.dateOfBirth&&(()=>{const s=W(t.dateOfBirth);return s.isValid?s.age>=65?e.jsxs("div",{className:"mt-1 text-xs text-amber-600 bg-amber-50 border border-amber-200 rounded px-2 py-1",children:["Age ",s.age,": Please consult with a doctor before donating blood"]}):e.jsxs("div",{className:"mt-1 text-xs text-green-600 bg-green-50 border border-green-200 rounded px-2 py-1",children:["✓ Age ",s.age,": Eligible for blood donation"]}):e.jsx("div",{className:"mt-1 text-xs text-red-600 bg-red-50 border border-red-200 rounded px-2 py-1",children:s.message})})()]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"bloodType",children:"Blood Type *"}),e.jsxs(ge,{value:t.bloodType,onValueChange:s=>F("bloodType",s),children:[e.jsx(pe,{children:e.jsx(fe,{placeholder:"Select blood type"})}),e.jsx(be,{children:Ke.map(s=>e.jsx(je,{value:s,children:s},s))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Location"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"city",children:"City *"}),e.jsx(I,{id:"city",value:t.city,onChange:s=>F("city",s.target.value),placeholder:"Mumbai",required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"state",children:"State *"}),e.jsxs(ge,{value:t.state,onValueChange:s=>F("state",s),children:[e.jsx(pe,{children:e.jsx(fe,{placeholder:"Select state"})}),e.jsx(be,{children:Ge.map(s=>e.jsx(je,{value:s,children:s},s))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Security"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"password",type:i?"text":"password",value:t.password,onChange:s=>F("password",s.target.value),placeholder:"Create a strong password",className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]}),t.password&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Password strength"}),e.jsx("span",{className:`text-xs ${te(t.password)==="bg-green-400"?"text-green-600":te(t.password)==="bg-yellow-400"?"text-yellow-600":"text-red-600"}`,children:C(t.password)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${te(t.password)}`,style:{width:t.password.length===0?"0%":t.password.length<8?"25%":H(t.password)?"100%":"75%"}})})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(I,{id:"confirmPassword",type:o?"text":"password",value:t.confirmPassword,onChange:s=>F("confirmPassword",s.target.value),placeholder:"Confirm your password",className:"pl-10 pr-10",required:!0}),e.jsx("button",{type:"button",onClick:()=>T(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(re,{className:"w-4 h-4"})})]}),t.confirmPassword&&e.jsx("div",{className:"mt-1",children:t.password===t.confirmPassword?e.jsx("div",{className:"text-xs text-green-600 bg-green-50 border border-green-200 rounded px-2 py-1",children:"✓ Passwords match"}):e.jsx("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 rounded px-2 py-1",children:"Passwords do not match"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(oe,{id:"agreedToTerms",checked:t.agreedToTerms,onCheckedChange:s=>F("agreedToTerms",s),className:"mt-1"}),e.jsxs(w,{htmlFor:"agreedToTerms",className:"text-sm leading-relaxed",children:["I agree to the ",e.jsx("button",{type:"button",className:"text-red-600 hover:underline",children:"Terms of Service"})," and understand the responsibilities of blood donation/request."]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(oe,{id:"agreedToPrivacy",checked:t.agreedToPrivacy,onCheckedChange:s=>F("agreedToPrivacy",s),className:"mt-1"}),e.jsxs(w,{htmlFor:"agreedToPrivacy",className:"text-sm leading-relaxed",children:["I agree to the ",e.jsx("button",{type:"button",className:"text-red-600 hover:underline",children:"Privacy Policy"})," and consent to my medical information being used for blood matching purposes."]})]})]}),e.jsx(P,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white py-3",disabled:!q().isValid||j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Create Account"]})})]})]})]})})]})]})})}export{as as UnifiedAuth};
